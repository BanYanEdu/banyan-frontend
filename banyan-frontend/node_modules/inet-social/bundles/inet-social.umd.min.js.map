{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://inet-social/src/model/Config.ts","ng://inet-social/src/social.service.ts","ng://inet-social/src/wall/social.component.ts","ng://inet-social/src/model/Activity.ts","ng://inet-social/src/share-member/share-member.component.ts","ng://inet-social/src/progress/progress.component.ts","ng://inet-social/src/activity-post/activity-post.component.ts","ng://inet-social/src/embed/social-embed.component.ts","ng://inet-social/src/activity/activity.component.ts","ng://inet-social/src/model/Comment.ts","ng://inet-social/src/comment/comment.component.ts","ng://inet-social/src/modal-view/modal-view.component.ts","ng://inet-social/src/activity-view/activity-view.component.ts","ng://inet-social/src/message-body/message-body.component.ts","ng://inet-social/src/localnews/localnews.component.ts","ng://inet-social/src/activity-action-more/activity-action-more.component.ts","ng://inet-social/src/social-friend/browse/friend-browse.component.ts","ng://inet-social/src/social-friend/invitation/friend-invitation.component.ts","ng://inet-social/src/social-friend/list-user/list-user.component.ts","ng://inet-social/src/social-friend/group-member/group-member.component.ts","ng://inet-social/src/social-friend/group-create/group-create.component.ts","ng://inet-social/src/social-friend/group/group.component.ts","ng://inet-social/src/comment-post/comment-post.component.ts","ng://inet-social/src/comment-list/comment-list.component.ts","ng://inet-social/src/activity-list/activity-list.component.ts","ng://inet-social/src/attachment-list/attachment-list.component.ts","ng://inet-social/src/widget/social-latest.component.ts","ng://inet-social/src/filelist/file-format.service.ts","ng://inet-social/src/filelist/file-ext.pipe.ts","ng://inet-social/src/filelist/file-icon.pipe.ts","ng://inet-social/src/filelist/list/file-list.component.ts","ng://inet-social/src/filelist/file-list.module.ts","ng://inet-social/src/social.module.ts","ng://inet-social/src/routing/home/social-home.component.ts","ng://inet-social/src/routing/activity-view/social-activity-view.component.ts","ng://inet-social/src/routing/social-routing.module.ts","ng://inet-social/src/routing/friend/social-friend.component.ts","ng://inet-social/src/routing/right-layout/social-right-layout.component.ts","ng://inet-social/src/routing/social-app.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","OpenGraph","LocalNews","POLICY_COMPANY","policy","Policy","display","PolicyDisplay","member","POLICY_FRIEND","POLICY_ME","iNet","username","SHARE_PUBLISH","category","id","icon","PolicyIcon","value","SHARE_COMPANY","SHARE_FRIEND","SHARE_ME","SocialService","httpClient","coreService","photoSwipe","socketService","fileFormatService","frontViewService","_this","this","viewDate","activityChange","Subject","commentChange","_removeTags","_socket","onMessage","subscribe","message","app","application","activityID","next","prototype","ngOnDestroy","unsubscribe","listGroups","callback","getJSON","data","err","elements","invitationReceiveList","params","invitationSendList","invitationRejectList","invitationCreate","postJSON","invitationDelete","invitationReject","invitationAccept","invitationSearch","listFriends","members","total","groupMemberCreate","groupMemberDelete","searchMember","searchFirmAccount","favoriteList","forEach","item","_favorite","indexActivity","activityWall","bind","activityLoad","error","activityPost","postForm","activityUpdate","activityUpdateScope","activityRemove","activityRemoveFile","activityLikeList","activityLike","activityUnLike","pollLoad","pollResult","pollVote","pollPost","pollUpdate","commentWall","commentPost","commentUpdate","commentRemove","commentLike","commentUnLike","activityDownLoadUrl","getPUrl","$","param","activityViewUrl","activityViewOnlineUrl","commentDownLoadUrl","commentViewUrl","commentViewOnlineUrl","isCommentApp","isActivityApp","viewAttachment","attachment","hasOnlineEditor","pathViewOnline","pathViewPdf","viewInline","window","open","pathDownLoad","viewImages","images","options","attachmentToFiles","attachments","files","push","name","file","type","mimetype","size","url","pathView","gridfsUUID","image","isImage","post","buildFormData","form","FormData","keys","k","secureMessageHtml","openGraph","createOpenGraphMessage","append","activity","uuid","path","getSsoRedirect","mpath","isCreator","creator","_editable","_localNewsPin","formatMessageDisplay","_indexAttachments","indexPolicies","binary","isComment","comment","_isSupportViewOnline","_isPdf","filename","getEditFormats","indexOf","_getExt","temp","split","length","toLowerCase","_policies","published","policies","inherit","splitPolicies","index","getIconByType","_policiesStr","slice","allCompany","allFriend","i","isAllFriend","isAllCompany","isOnlyMe","mimeType","$el","html","find","join","remove","text","dataSocial","parseSocialDataMessage","SocialTag","_openGraph","_localNews","HtmlUtils","formatHtmlDisplay","replace","_displayMessage","encodeBase64","JSON","stringify","convertLinks","toUpperCase","str","btoa","unescape","encodeURIComponent","createLocalNewsMessage","localNews","_createTagMessage","tag","typeMessages","substring","__messageLink","parse","decodeBase64","e","decodeURIComponent","escape","atob","tagName","document","createElement","innerText","style","hidden","outerHTML","Injectable","HttpClientService","CoreService","PhotoSwipe","WebSocketClientService","FileFormatService","FrontViewService","SocialComponent","Component","args","selector","template","SocialActivity","ShareMemberComponent","socialService","accentService","companyMode","companyCategories","communityCategories","groups","contacts","friends","searchContacts","selectContacts","showMenu","customActive","_matchContacts","_params","pageSize","pageNumber","loading","ngOnInit","body","appendChild","shareModal","_element","nativeElement","onCloseMenu","addEventListener","init","setTimeout","setPolicies","removeEventListener","_modalShowObserver","ngAfterViewInit","onShown","_focusInputMember","categories","user","_createSocialMember","fullname","_sortMembers","group","usercode","_index","_indexKeyToSearch","setDefault","_resetActive","_resetModal","closeMenu","active","displays","concat","displayIcon","injectPolicies","element","selectMember","isOpening","openSelectCustom","show","_updateSelectContacts","openMenu","_getSearchKeyword","filter","_loadContacts","addMember","selected","hasSelectedMember","removeMember","getIndexMemberSelected","splice","isShown","cancelChanges","stopPropagation","hide","saveChanges","onScrollContact","node","target","scrollHeight","scrollTop","clientHeight","_scrollTopModal","contactList","cat","_setSearchKeyword","_hasContacts","sort","a","localeCompare","viToEn","policyItem","inputMember","focus","AccentService","ViewChild","Input","ProgressComponent","el","ElementRef","ActivityPostComponent","shareMemberEnable","linkPreviewEnable","enterPost","showWithAnimation","placeHolder","onCancel","EventEmitter","onPost","removeFiles","linkRegex","_clickOut","postEl","postElement","messageEl","detectLink","focusOutHideForm","editActivity","isSameNode","contains","isFocusForm","hasData","isShareMemberOpening","closeForm","enterPostForm","preventDefault","postActivity","getData","emit","indicator","focusMessage","fileRemoved","getUuidFileRemoved","shareMember","linkPreview","resetForm","setData","showForm","resizeInput","clearData","typeMessage","trim","hideForm","noTransition","isShow","setFormHeight","overflow","setPostHeight","messageAutoSize","adjust","isPreview","links","exec","setLink","height","map","Output","AutoSizeDirective","LinkPreviewComponent","SocialEmbedComponent","allowComment","onLoad","onError","totalComments","_loaded","_loadActivity","contextID","errors","ActivityComponent","modalService","onUpdated","onDeleted","editing","policiesDisplay","title","declineDelete","activityEdit","activityCancelEdit","activityDelete","_modalRef","tmpConfirmDelete","class","confirmDelete","likeStatus","likeCount","BsModalService","_super","SocialComment","__","constructor","create","tslib_1.__extends","CommentComponent","editable","commentCancelEdit","commentEdit","commentDelete","SocialModalViewComponent","$modal","viewModal","on","viewActivity","modal","ActivityViewComponent","ngOnChanges","changes","activityId","currentValue","previousValue","_load","activityUpdated","notFound","MessageBodyComponent","feed","ActivityActionMoreComponent","onEdit","onDelete","isActivity","hasAction","FriendBrowseComponent","placeholder","clearSearchValue","onSearch","_searchMember","inviteFriend","friend","added","memberName","response","keyword","clearTimeout","_timer","respone","userCodes","FriendInvitationComponent","_loadReceiveInvite","_loadSendInvite","acceptInvite","inviter","invitations","noInvitation","rejectInvite","removeInvite","invitationsSend","noInvitationSend","items","ListUserComponent","cacheStorage","selectMembers","showMembers","matchMembers","_allEmployees","_allFriends","employees","_initMembers","promiseQueue","key","users","resolveQueue","_search","search","resetData","focusInput","onScroll","_addMember","_hasMember","CacheStorageService","GroupMemberComponent","onSelect","listUser","onSave","GroupCreateComponent","onCreate","_input","inputGroup","SocialGroupComponent","router","_prefix","_loadAllFriends","searching","viewGroups","_router","events","pipe","event","NavigationEnd","_actionView","createGroup","modalCreateMember","groupCreated","_loadGroups","viewGroup","navigate","removeGroup","groupActive","modalGroupDeleteRef","onDeleteGroup","_loadFriends","_getMemberStr","toGroups","removeFriend","modalMemberDeleteRef","memberActive","onDeleteMember","promises","_deleteMemberPromise","Promise","all","then","values","groupView","_loadMembers","resolve","reject","addMemberGroup","modalAddMember","saveMemberGroup","_viewGroup","noGroups","_viewGroupMember","viewMembers","noFriends","tmp","_indexSearch","Router","CommentPostComponent","editComment","doPost","doCancel","_getRemoveFiles","_resizeInput","CommentListComponent","commentLoad","commentParams","_commentChange","load","focusForm","commentCreate","commentPosted","isInit","comments","replaceOrAddComment","posted","remainComments","commentUpdated","commentDeleted","removeComment","getIndexComment","insertAtFirst","ActivityListComponent","postEnable","scroller","loader","doLoadWall","activities","showLoading","hasMore","_activityChange","_addActivity","initScroller","loadWall","removeEventScroller","removeActivityById","clearWall","_loading","_renderWall","_scrollBottomListener","activityCreate","_activityPosted","unshift","activityDeleted","initEventScroller","scrollToTop","scrollingElement","AttachmentListComponent","_indexFiles","viewImage","imageEl","_getImageIndex","clickElement","_images","_getAttachmentById","getElementsByTagName","src","w","h","sizeDynamic","SocialLatestComponent","viewMoreEnable","_loadLatest","viewMore","result","_updateWithCommentLatest","lastUpdate","FILES_FORMAT","FILES_EDIT_FORMAT","FILES_VIEW_FORMAT","getImagePath","commonImageFolder","lastIndex","lastIndexOf","getFileFormatPath","getUrlByExt","ext","getUrlByName","getExtByName","pop","getViewFormats","FileExtPipe","formatService","transform","Pipe","FileIconPipe","FileListComponent","removable","onClick","onRemove","console","log","galleryOptions","width","thumbnailsColumns","imageAnimation","NgxGalleryAnimation","Slide","breakpoint","imagePercent","thumbnailsPercent","thumbnailsMargin","thumbnailMargin","preview","galleryImages","small","medium","big","_initFileEl","clickFile","removeFile","addFiles","_fileIsImage","_readImageBase64","fileEl","reader","FileReader","readAsDataURL","onload","FileListModule","NgModule","imports","CommonModule","NgxGalleryModule","declarations","exports","providers","SocialModule","FormsModule","PhotoSwipeModule","ReactiveFormsModule","OpenGraphModule","AutocompleteModule","BsDropdownModule","forRoot","ModalModule","FrontViewModule","CoreModule","DateTimeModule","entryComponents","SocialHomeComponent","SocialActivityViewComponent","route","_routerObserver","_updateActivityId","snapshot","paramMap","get","ActivatedRoute","routes","component","redirectTo","pathMatch","SocialRoutingModule","RouterModule","forChild","SocialFriendComponent","tabs","searchValue","FormControl","prefix","_searchEl","searchEl","valueChanges","_searchable","_activeComponent","instance","changeTab","loadTabComponent","componentRef","read","ViewContainerRef","SocialRightLayoutComponent","SocialAppModule","NavigationTabModule"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","declare let iNet: any;\n\nexport enum SocialTag {\n  OpenGraph = 'open-graph',\n  LocalNews = 'localnews'\n}\n\nexport enum Policy {\n  Friend = 'FRIEND',\n  Company = 'COMPANY',\n  Individual = 'INDIVIDUAL',\n}\n\nexport const PolicyValueAll = 'EVERYONE';\n\nexport enum PolicyDisplay {\n  Friend = 'Bn b',\n  Company = 'Cng ty',\n  Publish = 'Cng khai',\n  CompanyFriend = 'Cng ty v bn b',\n  OnlyMe = 'Mnh ti'\n}\n\nexport enum PolicyIcon {\n  Friend = 'fa-user',\n  Company = 'fa-cube',\n  Publish = 'fa-globe',\n  category = 'fa-users',\n  OnlyMe = 'fa-lock'\n}\n\nexport interface PolicyItem {\n  policy: Policy;\n  display: string;\n  member: string;\n}\n\nexport const POLICY_COMPANY: PolicyItem = {\n  policy: Policy.Company,\n  display: PolicyDisplay.Company,\n  member: PolicyValueAll\n};\nexport const POLICY_FRIEND = {\n  policy: Policy.Friend,\n  display: PolicyDisplay.Friend,\n  member: PolicyValueAll\n};\nexport const POLICY_ME = {\n  policy: Policy.Individual,\n  display: PolicyDisplay.OnlyMe,\n  member: iNet.username\n};\n\nexport const SHARE_PUBLISH = {\n  category: true,\n  id: 0,\n  icon: PolicyIcon.Publish,\n  display: PolicyDisplay.Publish,\n  value: []\n};\nexport const SHARE_COMPANY_FRIEND = {\n  category: true,\n  id: 1,\n  icon: PolicyIcon.category,\n  display: PolicyDisplay.CompanyFriend,\n  value: [\n    POLICY_COMPANY,\n    POLICY_FRIEND\n  ]\n};\nexport const SHARE_COMPANY = {\n  category: true,\n  id: 2,\n  icon: PolicyIcon.Company,\n  display: PolicyDisplay.Company,\n  value: [\n    POLICY_COMPANY\n  ]\n};\nexport const SHARE_FRIEND = {\n  category: true,\n  id: 3,\n  icon: PolicyIcon.Friend,\n  display: PolicyDisplay.Friend,\n  value: [\n    POLICY_FRIEND\n  ]\n};\nexport const SHARE_ME = {\n  category: true,\n  id: 4,\n  icon: PolicyIcon.OnlyMe,\n  display: PolicyDisplay.OnlyMe,\n  value: [\n    POLICY_ME\n  ]\n};\n\nexport interface SocialMember {\n  id: any\n  display: string\n  value: PolicyItem[]\n  icon: string\n  username?: boolean\n  category?: boolean\n  group?: boolean\n  selected?: boolean\n  active?: boolean\n  _index?: string\n}\n\nexport const LOCALNEWS = 'LOCALNEWS';\nexport const TASKNOTIFY = 'TASKNOTIFY';\nexport const PINNEWS = 'PINNEWS';\nexport const APP_ACTIVITY = 'iSocial-Activity';\nexport const APP_COMMENT = 'iSocial-Comment';\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {SocialActivity} from './model/Activity';\nimport {ActivityParams} from './model/ActivityParams';\nimport {Attachment} from './model/Attachment';\nimport {LikeParams} from './model/LikeParams';\nimport {\n    APP_ACTIVITY, APP_COMMENT,\n    PINNEWS,\n    Policy, PolicyIcon, PolicyValueAll, SHARE_COMPANY, SHARE_FRIEND, SHARE_ME,\n    SHARE_PUBLISH, SocialTag\n} from './model/Config';\nimport {InvitationParams} from './model/InvitationParams';\nimport {SocialComment} from './model/Comment';\nimport {CoreService, HtmlUtils, HttpClientService, WebSocketClientService, EnvelopBody} from 'inet-core';\nimport {Subject, Subscription} from \"rxjs\";\nimport {FrontViewService, Photo, PhotoSwipe, FileFormatService} from \"inet-ui\";\n\ndeclare let iNet: any;\ndeclare let $: any;\n\n@Injectable()\nexport class SocialService implements OnDestroy {\n\n    viewDate: string = 'dd/MM/yyyy HH:mm';\n\n    activityChange = new Subject<string>();\n    commentChange = new Subject<string>();\n\n    private _removeTags = [\n        'link',\n        'meta',\n        'script',\n        'style',\n        'open-graph'\n    ];\n\n    private _socket: Subscription;\n\n    constructor(\n        private httpClient: HttpClientService,\n        private coreService: CoreService,\n        private photoSwipe: PhotoSwipe,\n        private socketService: WebSocketClientService,\n        private fileFormatService: FileFormatService,\n        private frontViewService: FrontViewService\n    ) {\n        // Receive activity notify real time\n        this._socket = this.socketService.onMessage.subscribe((message: EnvelopBody) => {\n            const app = message.application;\n            const activityID = message.message && message.message['msgID'];\n            if (app === APP_ACTIVITY) {\n                this.activityChange.next(activityID);\n            } else if (app === APP_COMMENT) {\n                this.commentChange.next(activityID);\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this._socket.unsubscribe();\n    }\n\n\n    listGroups(callback: any) {\n        return this.getJSON('social/member/category', null, (data, err) => {\n            callback(data && data.elements || [], err);\n        });\n    }\n\n    invitationReceiveList(params, callback) {\n        return this.getJSON('social/invitation', params, callback);\n    }\n\n    invitationSendList(params, callback) {\n        return this.getJSON('social/invitation/mylist', params, callback);\n    }\n\n    invitationRejectList(params, callback) {\n        return this.getJSON('social/invitation/rejectedlist', params, callback);\n    }\n\n    invitationCreate(params: InvitationParams, callback) {\n        return this.postJSON('social/invitation/create', params, callback);\n    }\n\n    invitationDelete(params: InvitationParams, callback) {\n        return this.postJSON('social/invitation/delete', params, callback);\n    }\n\n    invitationReject(params: InvitationParams, callback) {\n        return this.postJSON('social/invitation/rejected', params, callback);\n    }\n\n    invitationAccept(params: InvitationParams, callback) {\n        return this.postJSON('social/invitation/accepted', params, callback);\n    }\n\n    invitationSearch(params, callback) {\n        return this.postJSON('social/member/search', params, callback);\n    }\n\n    listFriends(params, callback) {\n        return this.getJSON('social/member/list', params, (data, err) => {\n            let members = data && data['items'] || [];\n            members.total = data && data.total || 0;\n            callback(members, err);\n        });\n    }\n\n    groupMemberCreate(params, callback) {\n        return this.postJSON('social/member/create', params, (data, err) => {\n            callback(data, err);\n        });\n    }\n\n    groupMemberDelete(params, callback) {\n        return this.postJSON('social/member/delete', params, (data, err) => {\n            callback(data, err);\n        });\n    }\n\n    searchMember(params, callback) {\n        this.coreService.searchFirmAccount(params, (data, err) => {\n            let members = data && data['items'] || [];\n            members.total = data && data.total || 0;\n            callback(members, err);\n        });\n    }\n\n    favoriteList(params, callback) {\n        return this.postJSON('social/activity/favorite', params, (data, err) => {\n            if (data && data['items']) {\n                data['items'].forEach((item) => {\n                    item._favorite = true;\n                    this.indexActivity(item);\n                });\n            }\n            callback(data, err);\n        });\n    }\n\n    activityWall(params: ActivityParams, callback) {\n        return this.getJSON('social/activity/wall', params,\n            (data, err) => {\n                if (data) {\n                    if (data['items']) {\n                        data['items'].forEach(this.indexActivity.bind(this));\n                    }\n                }\n                callback(data, err);\n            });\n    }\n\n    activityLoad(params, callback) {\n        return this.getJSON('social/activity/load', params, (data: SocialActivity, error) => {\n            if (data) {\n                this.indexActivity(data);\n            }\n            callback(data, error);\n        });\n    }\n\n    activityPost(params, callback) {\n        return this.postForm('social/activity/post', params, (data, err) => {\n            if (data) {\n                this.indexActivity(data);\n            }\n            callback(data, err);\n        });\n    }\n\n    activityUpdate(params, callback) {\n        return this.postForm('social/activity/update', params, (data, err) => {\n            if (data) {\n                this.indexActivity(data);\n            }\n            callback(data, err);\n        });\n    }\n\n    /**\n     *\n     * @param params\n     * {\n     *    application: string\n     *    contextID: string\n     *    element: [{\n     *      member: string\n     *      display: string\n     *      policy: \"FRIEND\"\n     *    }]\n     * }\n     * @param callback\n     *\n     */\n    activityUpdateScope(params, callback) {\n        return this.postForm('social/activity/scope', params, callback);\n    }\n\n    activityRemove(params, callback) {\n        return this.getJSON('social/activity/delete', params, callback);\n    }\n\n    activityRemoveFile(params, callback) {\n        return this.getJSON('social/activity/binaryremove', params, callback);\n    }\n\n    activityLikeList(params, callback) {\n        return this.getJSON('social/activity/likelist', params, callback);\n    }\n\n    activityLike(params: LikeParams, callback) {\n        return this.getJSON('social/activity/like', params, callback);\n    }\n\n    activityUnLike(params: LikeParams, callback) {\n        return this.getJSON('social/activity/unlike', params, callback);\n    }\n\n    pollLoad(params, callback) {\n        return this.getJSON('social/poll/load', params, callback);\n    }\n\n    pollResult(params, callback) {\n        return this.getJSON('social/poll/result', params, callback);\n    }\n\n    pollVote(params, callback) {\n        return this.getJSON('social/poll/vote', params, callback);\n    }\n\n    pollPost(params, callback) {\n        return this.postForm('social/activity/pollpost', params, callback);\n    }\n\n    pollUpdate(params, callback) {\n        return this.postForm('social/poll/update', params, callback);\n    }\n\n    commentWall(params, callback) {\n        return this.getJSON('social/comment/wall', params, (data, err) => {\n            if (data && data['items']) {\n                data['items'].forEach(item => this.indexActivity(item));\n            }\n            callback(data, err);\n        });\n    }\n\n    commentPost(params, callback) {\n        return this.postForm('social/comment/post', params, (data, err) => {\n            if (data) {\n                this.indexActivity(data);\n            }\n            callback(data, err);\n        });\n    }\n\n    commentUpdate(params, callback) {\n        return this.postForm('social/comment/update', params, (data, err) => {\n            if (data) {\n                this.indexActivity(data);\n            }\n            callback(data, err);\n        });\n    }\n\n    commentRemove(params, callback) {\n        return this.getJSON('social/comment/delete', params, callback);\n    }\n\n    commentLike(params: LikeParams, callback) {\n        return this.getJSON('social/comment/like', params, callback);\n    }\n\n    commentUnLike(params: LikeParams, callback) {\n        return this.getJSON('social/comment/unlike', params, callback);\n    }\n\n\n    // Download / View file\n\n    activityDownLoadUrl(params: BinaryParams): string {\n        return iNet.getPUrl('social/activity/download') + '?' + $.param(params);\n    }\n\n    activityViewUrl(params: BinaryParams): string {\n        return iNet.getPUrl('social/activity/inlineview') + '?' + $.param(params);\n    }\n\n    activityViewOnlineUrl(params: BinaryParams): string {\n        return iNet.getPUrl('unicorn/page/social/activity-viewer') + '?' + $.param(params);\n    }\n\n    commentDownLoadUrl(params: BinaryParams): string {\n        return iNet.getPUrl('social/comment/download') + '?' + $.param(params);\n    }\n\n    commentViewUrl(params: BinaryParams): string {\n        return iNet.getPUrl('social/comment/inlineview') + '?' + $.param(params);\n    }\n\n    commentViewOnlineUrl(params: BinaryParams): string {\n        return iNet.getPUrl('unicorn/page/social/comment-viewer') + '?' + $.param(params);\n    }\n\n    isCommentApp(application: string) {\n        return application === APP_COMMENT;\n    }\n\n    isActivityApp(application: string) {\n        return application === APP_ACTIVITY;\n    }\n\n    viewAttachment(attachment: Attachment) {\n        if ((iNet.hasOnlineEditor && attachment.pathViewOnline) || attachment.pathViewPdf) {\n            this.frontViewService.viewInline(attachment.pathViewOnline || attachment.pathViewPdf);\n        } else {\n            window.open(attachment.pathDownLoad, '_blank');\n        }\n    }\n\n    viewImages(images: Photo[], options?: any) {\n        this.photoSwipe.open(images, options);\n    }\n\n\n    attachmentToFiles(attachments: Attachment[]) {\n        const files = [];\n        attachments.forEach(item => {\n            files.push({\n                name: item.file,\n                type: item.mimetype,\n                size: item.size,\n                url: item.pathView,\n                id: item.gridfsUUID,\n                image: this.isImage(item.mimetype)\n            });\n        });\n        return files;\n    }\n\n    private getJSON(url: string, params: any, callback: any): Subscription {\n        return this.httpClient.getJSON(iNet.getPUrl(url), params).subscribe(\n            callback,\n            err => {\n                callback(null, err);\n            }\n        );\n    }\n\n    private postJSON(url: string, params: any, callback: any): Subscription {\n        return this.httpClient.postJSON(iNet.getPUrl(url), params).subscribe(\n            callback,\n            err => {\n                callback(null, err);\n            }\n        );\n    }\n\n    private postForm(url: string, params: any, callback: any) {\n        return this.httpClient.post(iNet.getPUrl(url), this.buildFormData(params)).subscribe(\n            callback,\n            err => {\n                callback(null, err);\n            }\n        );\n    }\n\n    private buildFormData(data) {\n        if (!data) {\n            return;\n        }\n\n        const form = new FormData();\n\n        Object.keys(data).forEach(k => {\n            if (k === 'openGraph') {\n                return;\n            }\n            if (k === 'message') {\n                let message = this.secureMessageHtml(data[k]);\n\n                // append open graph data on message\n                if (data.openGraph) {\n                    message += this.createOpenGraphMessage(data.openGraph);\n                }\n\n                form.append(k, message);\n\n            } else {\n                form.append(k, data[k]);\n            }\n        });\n\n        return form;\n    }\n\n    private indexActivity(activity: SocialActivity | SocialComment) {\n\n        if (!activity || !activity.uuid) {\n            return;\n        }\n\n        // Get full path\n        if (activity.path) {\n            activity.path = this.coreService.getSsoRedirect({\n                url: activity.path,\n                application: activity.application\n            });\n        }\n        if (activity.mpath) {\n            activity.mpath = this.coreService.getSsoRedirect({\n                url: activity.mpath,\n                application: activity.application\n            });\n        }\n\n        activity.isCreator = activity.creator === iNet.username;\n        activity._editable = activity.isCreator && !activity.path;\n        activity._localNewsPin = activity.type === PINNEWS;\n\n        this.formatMessageDisplay(activity);\n        this._indexAttachments(activity);\n        this.indexPolicies(activity);\n    }\n\n    private _indexAttachments(activity) {\n        activity.images = [];\n        activity.files = [];\n        activity.attachments.forEach((item: Attachment) => {\n            let params: any = {\n                binary: item.uuid\n            };\n            let isComment = activity.hasOwnProperty('activityID');\n            if (isComment) {\n                params.activity = activity.activityID;\n                params.comment = activity.uuid;\n                item.pathView = this.commentViewUrl(params);\n                item.pathDownLoad = this.commentDownLoadUrl(params);\n            } else {\n                params.activity = activity.uuid;\n                item.pathView = this.activityViewUrl(params);\n                item.pathDownLoad = this.activityDownLoadUrl(params);\n            }\n\n            if (this.isImage(item.mimetype)) {\n                activity.images.push(item);\n            } else {\n\n                if (this._isSupportViewOnline(item.file)) {\n                    if (isComment) {\n                        item.pathViewOnline = this.commentViewOnlineUrl(params);\n                    } else {\n                        item.pathViewOnline = this.activityViewOnlineUrl(params);\n                    }\n                }\n\n                if (this._isPdf(item.file)) {\n                    item.pathViewPdf = item.pathView;\n                }\n\n                activity.files.push(item);\n            }\n\n        });\n    }\n\n    private _isSupportViewOnline(filename: string) {\n        return this.fileFormatService.getEditFormats().indexOf(this._getExt(filename)) > -1;\n    }\n\n    private _isPdf(filename: string) {\n        return this._getExt(filename) === 'pdf';\n    }\n\n    private _getExt(name: string): string {\n        let temp = name.split('.');\n        if (temp.length > 1) {\n            return temp[temp.length - 1].toLowerCase();\n        } else {\n            return '';\n        }\n    }\n\n    private indexPolicies(activity) {\n        activity._policies = [];\n\n        if (activity.published) {\n            // Publish\n            activity._policies.push(SHARE_PUBLISH);\n        } else {\n\n            activity.policies.forEach(item => {\n                if (item.inherit) {\n                    return;\n                }\n                let policy = {\n                    member: item.category,\n                    display: item.display || item.category,\n                    policy: item.policy\n                };\n                activity._policies.push(policy);\n            });\n\n            activity._policies = this.splitPolicies(activity._policies);\n\n            // Add icon\n            activity._policies.forEach((item, index) => {\n                if (!item.hasOwnProperty('icon')) {\n                    activity._policies[index] = {\n                        id: item.member,\n                        display: item.display,\n                        icon: this.getIconByType(item.policy),\n                        value: [item]\n                    };\n                }\n            });\n        }\n\n        // Policies display\n        if (activity._policies.length <= 4) {\n            activity._policiesStr = '';\n            activity._policies.forEach(item => {\n                if (item === SHARE_ME) {\n                    return;\n                }\n                activity._policiesStr += item.display + ', ';\n            });\n            activity._policiesStr = activity._policiesStr.slice(0, -2);\n        } else {\n            activity._policiesStr = activity._policies[0].display;\n            activity._policiesStr += ' v ' + (activity._policies.length - 2) + ' ngi khc';\n        }\n    }\n\n    getIconByType(policy: string) {\n        switch (policy) {\n            case Policy.Company:\n                return PolicyIcon.Company;\n            case Policy.Friend:\n                return PolicyIcon.Friend;\n            default:\n                return '';\n        }\n    }\n\n    private splitPolicies(policies) {\n        if (policies.length > 0) {\n            let allCompany, allFriend;\n\n            for (let i = 0; i < policies.length; i++) {\n                let item = policies[i];\n                if (this.isAllFriend(item)) {\n                    allFriend = item;\n                } else if (this.isAllCompany(item)) {\n                    allCompany = item;\n                } else if (this.isOnlyMe(item)) {\n                    policies[i] = SHARE_ME;\n                }\n            }\n\n            if (allFriend) {\n                policies[policies.indexOf(allFriend)] = SHARE_FRIEND;\n            } else if (allCompany) {\n                policies[policies.indexOf(allCompany)] = SHARE_COMPANY;\n            }\n        }\n        return policies;\n    }\n\n    private isAllCompany(policy): boolean {\n        return policy.display === Policy.Company &&\n            policy.policy === Policy.Company;\n    }\n\n    private isAllFriend(policy): boolean {\n        return policy.member === PolicyValueAll &&\n            policy.policy === Policy.Friend;\n    }\n\n    private isOnlyMe(policy): boolean {\n\n        return policy.member === iNet.username &&\n            policy.policy === Policy.Individual;\n    }\n\n    private isImage(mimeType: string): boolean {\n        return mimeType.indexOf('image') > -1;\n    }\n\n    /**\n     * Remove html tag on message\n     */\n    private secureMessageHtml(message: string) {\n        const $el = $('<div>').html(message);\n        $el.find(this._removeTags.join(',')).remove();\n        return $el.text();\n    }\n\n    /**\n     * Format message and open graph data to display\n     */\n    private formatMessageDisplay(activity: SocialActivity) {\n\n        // Get social data message\n        let dataSocial = this.parseSocialDataMessage(activity);\n\n        // Only get first item\n        if (dataSocial[SocialTag.OpenGraph].length > 0) {\n            activity._openGraph = dataSocial[SocialTag.OpenGraph][0];\n        }\n        if (dataSocial[SocialTag.LocalNews].length > 0) {\n            activity._localNews = dataSocial[SocialTag.LocalNews][0];\n            activity._localNews.url = activity.path;\n        }\n\n        // remove script and style\n        let message = activity.message = this.secureMessageHtml(activity.message);\n\n        // Beak line\n        message = HtmlUtils.formatHtmlDisplay(message);\n\n        // link\n        message = message.replace(/(https?:\\/\\/[^\\s]+)/g, function (url) {\n            return '<a href=\"' + url + '\" target=\"_blank\" rel=\"nofollow noopener\">' + url + '</a>';\n        });\n\n        activity._displayMessage = message;\n    }\n\n    createOpenGraphMessage(openGraph: Object): string {\n        let value = this.encodeBase64(JSON.stringify(this.convertLinks(openGraph)))\n        return 'uri_message:link_preview:' + value;\n    }\n\n    convertLinks(data) {\n        let param = {};\n        param['title'] = data['title'];\n        param['image'] = data['image'];\n        param['description'] = data['description'];\n        param['url'] = data['url'];\n        param['finalUrl'] = data['site_name'].toUpperCase();\n        return param;\n    }\n\n    encodeBase64(str: string) {\n        return window.btoa(unescape(encodeURIComponent(str)));\n    }\n\n\n    createLocalNewsMessage(localNews: Object): string {\n        return this._createTagMessage(SocialTag.LocalNews, localNews);\n    }\n\n    // parseSocialDataMessage(activity: SocialActivity | SocialComment): Object {\n    //     let data = {};\n    //     let $el = $('<div>').html(activity.message);\n    //\n    //     for (let tag in SocialTag) {\n    //         let tagName = SocialTag[tag];\n    //         data[tagName] = [];\n    //         $el.find(tagName).each(function () {\n    //             try {\n    //                 data[tagName].push(JSON.parse(this.innerHTML));\n    //             } catch (e) {\n    //             }\n    //\n    //             // Remove tag after extract data\n    //             this.remove();\n    //         });\n    //     }\n    //\n    //     // Apply message after extract data\n    //     activity.message = $el.html();\n    //\n    //     return data;\n    // }\n    parseSocialDataMessage(activity: SocialActivity | SocialComment): Object {\n        let data = {};\n        for (let tag in SocialTag) {\n            let tagName = SocialTag[tag];\n            data[tagName] = [];\n        }\n\n        let message = activity.message;\n        let index = message.indexOf(\"uri_message\");\n        if(index > -1){\n            message = message.substring(index);\n            let typeMessages = message.split(\":\");\n            if(typeMessages.length === 3){\n                if (typeMessages[0] === 'uri_message' && typeMessages[1] === 'link_preview') {\n                    try {\n                        let __messageLink = JSON.parse(this.decodeBase64(typeMessages[2]));\n                        data[SocialTag.OpenGraph].push(__messageLink );\n                    } catch (e) {\n\n                    }\n                }\n            }\n            // Apply message after extract data\n            activity.message = activity.message.substring(0,index);\n        }\n        return data;\n    }\n    decodeBase64(str: string) {\n        return decodeURIComponent(escape(window.atob(str)));\n    }\n    private _createTagMessage(tagName: string, data: Object): string {\n        let tag = document.createElement(tagName);\n        tag.innerText = JSON.stringify(data);\n        tag.style.display = 'none';\n        tag.hidden = true;\n        return tag.outerHTML;\n    }\n}\n\nexport interface FavoriteParams {\n    activity: string;\n    remove?: boolean;\n}\n\nexport interface BinaryParams {\n    binary: string;\n    activity?: string;\n    comment?: string;\n}\n","import {Component} from '@angular/core';\n@Component({\n  selector: 'social-wall',\n  template: '<div socialActivityList></div>'\n})\nexport class SocialComponent {}\n","import {Member} from './Member';\nimport {Attachment} from './Attachment';\nimport {SocialMember} from './Config';\n\nexport class SocialActivity {\n  activityID?: string;\n  alias?: string;\n\n  application?: string;\n\n  contextID?: string;\n\n  mpath?: string;\n\n  path?: string;\n\n  attachments?: Attachment[];\n\n  avataUrl?: string;\n\n  count?: number;\n\n  fullname?: string;\n\n  creator?: string;\n\n  // Available for external user\n  external?: boolean;\n\n  firmContext?: string;\n\n  likeCount?: number;\n\n  likeStatus?: boolean;\n\n  message?: string;\n\n  organId?: string;\n\n  policies?: Member[];\n\n  // Have poll attached\n  pollAttached?: boolean;\n\n  posted?: number;\n\n  lastUpdate?: number;\n\n  published?: boolean;\n\n  type?: string;\n\n  uuid?: string;\n\n  comments?: any[];\n  images?: any[];\n  files?: any[];\n  editing?: boolean;\n  isCreator?: boolean;\n  _policies?: SocialMember[];\n  _policiesStr?: string;\n  _displayMessage?: string;\n  _openGraph?: any;\n  _localNews?: any;\n  _editable?: boolean;\n  _localNewsPin?: boolean;\n}\n","import {\n    Component,\n    ElementRef,\n    ViewChild,\n    AfterViewInit,\n    OnDestroy,\n    OnInit,\n    Input\n} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {\n    Policy, SHARE_COMPANY, SHARE_FRIEND, SHARE_ME,\n    SHARE_PUBLISH, SocialMember\n} from '../model/Config';\nimport {AccentService} from 'inet-core';\nimport {SocialActivity} from \"../model/Activity\";\nimport {SocialComment} from \"../model/Comment\";\n\n@Component({\n    selector: '[socialShareMember]',\n    templateUrl: './share-member.component.html',\n    styleUrls: [\n        '../styles/user-styles.css',\n        './share-member.component.css'\n    ]\n})\nexport class ShareMemberComponent implements OnInit, OnDestroy, AfterViewInit {\n    @ViewChild('shareModal') shareModal;\n    @ViewChild('searchInput') inputMember: ElementRef;\n    @ViewChild('contactList') contactList: ElementRef;\n\n    @Input() companyMode: boolean = true;\n    @Input() activity: SocialActivity | SocialComment;\n\n    categories: SocialMember[];\n\n    companyCategories: SocialMember[] = [\n        SHARE_COMPANY,\n        SHARE_ME\n    ];\n\n    communityCategories: SocialMember[] = [\n        SHARE_PUBLISH,\n        SHARE_FRIEND,\n        SHARE_ME\n    ];\n\n    groups: SocialMember[] = [];\n\n    // All groups, members\n    contacts: SocialMember[] = [];\n\n    // Groups, members active\n    members: SocialMember[] = [];\n\n    friends: SocialMember[] = [];\n\n    // Search data\n    searchContacts: SocialMember[] = [];\n    selectContacts: SocialMember[] = [];\n\n    showMenu: boolean = false;\n\n    displayIcon: string;\n    display: string;\n    policies: Policy[] = [];\n\n    customActive: boolean = false;\n\n    private _matchContacts: SocialMember[] = [];\n    private _params = {\n        pageSize: 10,\n        pageNumber: 0,\n        loading: false\n    };\n    private _modalShowObserver;\n\n    constructor(\n        private socialService: SocialService,\n        private accentService: AccentService\n    ) { }\n\n    ngOnInit() {\n        document.body.appendChild(this.shareModal._element.nativeElement);\n\n        this.onCloseMenu = this.onCloseMenu.bind(this);\n        document.addEventListener('click', this.onCloseMenu);\n\n        this.init();\n\n        setTimeout(() => {\n            if (this.activity) {\n                this.setPolicies(this.activity._policies);\n            } else {\n                this.setPolicies();\n            }\n        }, 100);\n    }\n\n    ngOnDestroy() {\n        document.removeEventListener('click', this.onCloseMenu);\n        this._modalShowObserver.unsubscribe();\n    }\n\n    ngAfterViewInit() {\n        this._modalShowObserver = this.shareModal.onShown.subscribe(() => {\n            this._focusInputMember();\n            this.searchMember();\n        });\n    }\n\n    init() {\n\n        if (this.companyMode) {\n            this.categories = this.companyCategories;\n\n            // Load all users company\n            let userAdded = [];\n            this.socialService.searchMember({pageSize: -1}, (members) => {\n                members.forEach(member => {\n                    let user = <SocialMember>this._createSocialMember({\n                        member: member.username,\n                        display: member.fullname,\n                        policy: Policy.Individual\n                    });\n                    user.username = member.username;\n                    this.contacts.push(user);\n                });\n\n                this._sortMembers(this.contacts);\n\n            });\n\n        } else {\n            this.categories = this.communityCategories;\n\n            // Load all groups\n            this.socialService.listGroups((groups) => {\n                groups.forEach(group => {\n                    let member = this._createSocialMember({\n                        display: group,\n                        member: group,\n                        policy: Policy.Friend\n                    });\n                    member.group = true;\n                    this.groups.push(member);\n                    this.contacts.push(member);\n                });\n\n                this._sortMembers(this.groups);\n                this._sortMembers(this.contacts);\n            });\n\n            // Load all friends\n            this.socialService.listFriends({pageSize: -1}, (members) => {\n                members.forEach(member => {\n                    let user = this._createSocialMember({\n                        member: member.usercode,\n                        display: member.fullname,\n                        policy: Policy.Individual\n                    });\n                    user.username = member.usercode;\n                    this.friends.push(user);\n                    this.contacts.push(user);\n                });\n\n                this._sortMembers(this.friends);\n                this._sortMembers(this.contacts);\n\n            });\n        }\n\n        this.categories.forEach(category => category._index = this._indexKeyToSearch(category.display));\n        this.contacts = this.categories.slice();\n\n    }\n\n    setDefault() {\n        this._resetActive();\n        this._resetModal();\n        this.closeMenu();\n    }\n\n    setPolicies(members?: SocialMember[]) {\n\n        this.setDefault();\n\n        if (!members || members.length < 1) {\n            members = [this.categories[0]];\n        }\n\n        // Set active category or group\n        if (members.length === 1 && (members[0].category || members[0].group)) {\n            members[0].active = true;\n        } else {\n            this.customActive = true;\n        }\n\n        let displays = [], policies = [];\n        for (let i = 0; i < members.length; i++) {\n            let member = members[i];\n            displays.push(member.display);\n            policies = policies.concat(member.value);\n        }\n\n        this.policies = policies;\n        this.display = displays.join(', ');\n        this.displayIcon = members[0].icon;\n        this.members = members;\n\n    }\n\n    injectPolicies(params: any) {\n        if (this.policies.length < 1) {\n            params.published = true;\n            // params.element = JSON.stringify('[]');\n        } else {\n            params.element = JSON.stringify(this.policies);\n        }\n        return params;\n    }\n\n    selectMember(member: SocialMember) {\n        this.setPolicies([member]);\n        this.closeMenu();\n    }\n\n    onCloseMenu() {\n        if (!this.isOpening()) {\n            this.showMenu = false;\n        }\n    }\n\n    openSelectCustom() {\n        this.selectContacts = this.members.slice();\n        this.shareModal.show();\n        this._updateSelectContacts();\n    }\n\n    closeMenu() {\n        this.showMenu = false;\n    }\n\n    openMenu() {\n        this.showMenu = true;\n    }\n\n    searchMember() {\n        let value = this._indexKeyToSearch(this._getSearchKeyword());\n        if (value) {\n            this._matchContacts = this.contacts.filter(member => {\n                return member._index.indexOf(value) > -1 ||\n                    (typeof member.id === 'string' && member.id.indexOf(value) > -1);\n            });\n        } else {\n            this._matchContacts = this.contacts;\n        }\n        this._loadContacts(true);\n    }\n\n    addMember(member: SocialMember) {\n        member.selected = !member.selected;\n        if (member.selected) {\n            if (!this.hasSelectedMember(member)) {\n                this.selectContacts.push(member);\n            }\n        } else {\n            this.removeMember(member);\n        }\n    }\n\n    removeMember(member: SocialMember) {\n        let index = this.getIndexMemberSelected(member);\n        if (index > -1) {\n            member.selected = false;\n            this.selectContacts.splice(index, 1);\n        }\n    }\n\n    hasSelectedMember(member: SocialMember): boolean {\n        return this.getIndexMemberSelected(member) > -1;\n    }\n\n    getIndexMemberSelected(member: SocialMember) {\n        for (let i = 0; i < this.selectContacts.length; i++) {\n            if (this.selectContacts[i].id === member.id) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    isOpening() {\n        return this.shareModal.isShown;\n    }\n\n    cancelChanges(e) {\n        e.stopPropagation();\n        this.shareModal.hide();\n    }\n\n    saveChanges(e) {\n        e.stopPropagation();\n        this.setPolicies(this.selectContacts);\n        this.shareModal.hide();\n        this.closeMenu();\n    }\n\n    onScrollContact(e) {\n        let node = e.target;\n        if (!this._params.loading && node.scrollHeight - (node.scrollTop + node.clientHeight) <= 40) {\n            this._loadContacts();\n        }\n    }\n\n    private _scrollTopModal() {\n        this.contactList.nativeElement.scrollTop = 0;\n    }\n\n    private _updateSelectContacts() {\n        this.contacts.forEach(member => member.selected = this.hasSelectedMember(member));\n    }\n\n    private _resetActive() {\n        this.categories.forEach(cat => cat.active = false);\n        this.groups.forEach(group => group.active = false);\n        this.customActive = false;\n    }\n\n    private _resetModal() {\n        this._params.loading = false;\n        this._params.pageNumber = 0;\n        this._matchContacts = [];\n        this.selectContacts = [];\n        this.searchContacts = [];\n        this._setSearchKeyword('');\n    }\n\n    private _loadContacts(init?: boolean) {\n        this._params.loading = true;\n        if (init) {\n            this._scrollTopModal();\n            this._params.pageNumber = 0;\n            this.searchContacts = [];\n        }\n        this.searchContacts = this.searchContacts.concat(this._matchContacts.slice(\n            this._params.pageNumber * this._params.pageSize,\n            (this._params.pageNumber + 1) * this._params.pageSize));\n\n        this._params.pageNumber += 1;\n        this._params.loading = !this._hasContacts();\n    }\n\n    private _hasContacts() {\n        return this._matchContacts.length > this._params.pageNumber * this._params.pageSize;\n    }\n\n    private _sortMembers(members: SocialMember[]) {\n        members.sort((a, b) => a.display.localeCompare(b.display));\n    }\n\n    private _indexKeyToSearch(str: string): string {\n        return this.accentService.viToEn(str).toLowerCase();\n    }\n\n    private _createSocialMember(policyItem): SocialMember {\n        return {\n            id: policyItem.member,\n            display: policyItem.display,\n            icon: this.socialService.getIconByType(policyItem.policy),\n            value: [policyItem],\n            _index: this._indexKeyToSearch(policyItem.display)\n        };\n    }\n\n    private _focusInputMember() {\n        this.inputMember.nativeElement.focus();\n    }\n\n    private _setSearchKeyword(value: string) {\n        this.inputMember.nativeElement.value = value;\n    }\n\n    private _getSearchKeyword() {\n        return this.inputMember.nativeElement.value;\n    }\n}\n","import {Component, ElementRef} from \"@angular/core\";\n\n@Component({\n    selector: 'progress-indicator',\n    templateUrl: './progress.component.html',\n    styleUrls: ['./progress.component.css']\n})\nexport class ProgressComponent {\n\n    constructor(private el: ElementRef) {\n        this.hide();\n    }\n\n    show() {\n        this.el.nativeElement.hidden = false;\n    }\n\n    hide() {\n        this.el.nativeElement.hidden = true;\n    }\n}\n","import {\n    Component,\n    EventEmitter,\n    Output,\n    Input,\n    ViewChild,\n    ElementRef,\n    OnInit,\n    OnDestroy\n} from '@angular/core';\nimport {SocialActivity} from '../model/Activity';\nimport {SocialComment} from '../model/Comment';\nimport {ShareMemberComponent} from '../share-member/share-member.component';\nimport {AutoSizeDirective} from 'inet-core';\nimport {SocialService} from \"../social.service\";\nimport {ProgressComponent} from \"../progress/progress.component\";\nimport {LinkPreviewComponent, FileListItem} from \"inet-ui\";\ndeclare let $: any;\n\n@Component({\n    selector: '[activityPost]',\n    templateUrl: './activity-post.component.html',\n    styleUrls: ['./activity-post.component.css']\n})\n\nexport class ActivityPostComponent implements OnInit, OnDestroy {\n    @Input() activity: SocialActivity;\n    @Input() shareMemberEnable: boolean = false;\n    @Input() linkPreviewEnable: boolean = false;\n    @Input() enterPost: boolean = false;\n    @Input() showWithAnimation: boolean = false;\n    @Input() placeHolder: string = 'Ni dung chia s...';\n    @Input() companyMode: boolean = true;\n\n    @Output() onCancel = new EventEmitter<any>();\n    @Output() onPost = new EventEmitter<any>();\n\n    @ViewChild('postElement') postElement: ElementRef;\n    @ViewChild('messageEl') messageEl: ElementRef;\n    @ViewChild(ShareMemberComponent) shareMember: ShareMemberComponent;\n    @ViewChild(AutoSizeDirective) messageAutoSize: AutoSizeDirective;\n    @ViewChild(LinkPreviewComponent) linkPreview: LinkPreviewComponent;\n    @ViewChild(ProgressComponent) indicator: ProgressComponent;\n\n    message: string = '';\n    files: FileListItem[] = [];\n    removeFiles: FileListItem[] = [];\n\n    // Detect link with space at end \"http://innetcloud.vn \"\n    private linkRegex = /(https?:\\/\\/[^\\s]+)/;\n    private postEl;\n    private _clickOut: boolean = false;\n\n    constructor(private socialService: SocialService) { }\n\n    ngOnInit() {\n        this.postEl = this.postElement.nativeElement;\n\n        // on paste detect link\n        this.messageEl.nativeElement.addEventListener('paste', () => {\n            setTimeout(() => {\n                this.detectLink();\n            }, 0);\n        });\n\n        this.focusOutHideForm = this.focusOutHideForm.bind(this);\n        document.addEventListener('click', this.focusOutHideForm);\n\n        if (this.activity) {\n            this.editActivity(this.activity);\n        }\n    }\n\n    ngOnDestroy() {\n        document.removeEventListener('click', this.focusOutHideForm);\n    }\n\n    focusOutHideForm(e) {\n        // Click inside\n        if (e.target.isSameNode(this.postEl) || this.postEl.contains(e.target)) {\n            return;\n        }\n        if (this._clickOut) {\n            return;\n        }\n\n        this._clickOut = true;\n        if (!this.isFocusForm() && !this.hasData() && !this.isShareMemberOpening()) {\n            this.closeForm();\n        }\n        setTimeout(() => {\n            this._clickOut = false;\n        }, 500);\n    }\n\n    isFocusForm() {\n        return $(this.postEl).find(':focus').length > 0;\n    }\n\n    enterPostForm(e) {\n        if (this.enterPost) {\n            e.preventDefault();\n            this.postActivity();\n        }\n    }\n\n    postActivity() {\n        const params = this.getData();\n        if (!params.message) {\n            this.focusMessage();\n            return;\n        }\n        this.onPost.emit(params);\n        this.indicator.show();\n    }\n\n    getData() {\n        let params: any = {\n            message: this.message\n        };\n\n        // File upload\n        for (let i = 0; i < this.files.length; i++) {\n            if (!this.files[i].id) {\n                params['file-' + i] = this.files[i];\n            }\n        }\n\n        // File removed\n        const fileRemoved = this.getUuidFileRemoved();\n        if (fileRemoved) {\n            params.gridfsUUID = fileRemoved;\n        }\n\n        if (this.activity) {\n            params.activity = this.activity.uuid;\n        }\n\n        if (this.shareMember) {\n            this.shareMember.injectPolicies(params);\n        }\n\n        if (this.linkPreview && this.linkPreview.getData()) {\n            params.openGraph = this.linkPreview.getData();\n        }\n\n        return params;\n    }\n\n    hasData() {\n        return this.message || this.files.length;\n    }\n\n    editActivity(activity: SocialActivity | SocialComment) {\n        this.resetForm();\n\n        this.activity = activity;\n\n        this.message = activity.message;\n\n        this.files = this.socialService.attachmentToFiles(activity.attachments);\n\n        this.focusMessage();\n\n        // if (this.shareMember) {\n        //     this.shareMember.setPolicies(activity._policies);\n        // }\n\n        if (activity._openGraph && this.linkPreview) {\n            this.linkPreview.setData(activity._openGraph);\n        }\n\n        this.showForm(true);\n\n        // Trigger input to adjust size\n        this.resizeInput();\n\n    }\n\n    resetForm() {\n\n        // Clear data\n        this.message = '';\n        this.files.length = 0;\n        this.removeFiles.length = 0;\n\n        if (this.linkPreview) {\n            this.linkPreview.clearData();\n        }\n\n        if (this.indicator) {\n            this.indicator.hide();\n        }\n\n        this.resizeInput();\n    }\n\n    typeMessage() {\n        if (this.message.trim() && this.message.slice(-1) === ' ') {\n            this.detectLink();\n        }\n    }\n\n    closeForm() {\n        this.resetForm();\n        this.hideForm(true);\n\n        if (this.activity) {\n            this.onCancel.emit(this.activity);\n            this.activity = null;\n        }\n    }\n\n    showForm(noTransition?: boolean) {\n        if (this.postEl.isShow) {\n            return;\n        }\n\n        if (!this.showWithAnimation && !noTransition) {\n            noTransition = true;\n        }\n\n        if (noTransition) {\n            this.setFormHeight('auto');\n            this.postEl.style.overflow = 'visible';\n        } else {\n            this.setPostHeight();\n            setTimeout(() => {\n                this.setFormHeight('auto');\n                this.postEl.style.overflow = 'visible';\n            }, 400);\n        }\n        this.focusMessage();\n        this.postEl.isShow = true;\n    }\n\n    hideForm(noTransition?: boolean) {\n        if (!this.postEl.isShow) {\n            return;\n        }\n\n        if (!this.showWithAnimation && !noTransition) {\n            noTransition = true;\n        }\n\n        if (noTransition) {\n            this.setFormHeight('');\n        } else {\n            this.setPostHeight();\n            setTimeout(() => {\n                this.setFormHeight('');\n            }, 0);\n        }\n        this.postEl.style.overflow = 'hidden';\n        this.postEl.isShow = false;\n    }\n\n    isShareMemberOpening() {\n        return this.shareMember && this.shareMember.isOpening();\n    }\n\n    focusMessage() {\n        this.messageEl.nativeElement.focus();\n    }\n\n    resizeInput() {\n        setTimeout(() => {\n            this.messageAutoSize.adjust();\n        }, 0);\n    }\n\n    private detectLink() {\n        if (!this.linkPreviewEnable || !this.linkPreview) {\n            return;\n        }\n\n        // Only one link preview\n        if (this.linkPreview.isPreview()) {\n            return;\n        }\n\n        let links = this.linkRegex.exec(this.message);\n        if (links && links.length > 0) {\n            this.linkPreview.setLink(links[0]);\n        }\n    }\n\n    private setPostHeight() {\n        this.setFormHeight(this.postEl.scrollHeight + 'px');\n    }\n\n    private setFormHeight(height: string) {\n        this.postEl.style.height = height;\n    }\n\n    private getUuidFileRemoved(): string {\n        return this.removeFiles.filter(file => file.id).map(file => file.id).join(',');\n    }\n}\n","import {Component, Input, OnInit, Output, EventEmitter} from '@angular/core';\nimport {SocialActivity} from \"../model/Activity\";\nimport {SocialService} from \"../social.service\";\n\n@Component({\n    selector: 'social-discussion',\n    templateUrl: './social-embed.component.html',\n    styleUrls: [\n        './social-embed.component.css'\n    ]\n})\nexport class SocialEmbedComponent implements OnInit {\n    @Input() activityID: string;\n    @Input() contextID: string;\n    @Input() application: string;\n    @Input() activity: SocialActivity;\n\n    @Input() allowComment: boolean = true;\n\n    @Output() onLoad = new EventEmitter<any>();\n    @Output() onError = new EventEmitter<any>();\n\n    totalComments: number = 0;\n\n    constructor(\n        private socialService: SocialService\n    ) {}\n\n    ngOnInit() {\n        if (this.activity) {\n            this._loaded();\n        } else {\n            this._loadActivity();\n        }\n    }\n\n    private _loadActivity() {\n        let params: any;\n        if (this.activityID) {\n            params = {\n                activity: this.activityID\n            };\n        } else if (this.contextID && this.application) {\n            params = {\n                contextID: this.contextID,\n                application: this.application\n            };\n        }\n\n        if (params) {\n            this.socialService.activityLoad(params, (activity, err) => {\n                if (err) {\n                    this.onError.emit(err);\n                } else {\n                    if (activity.errors) {\n                        this.onError.emit(activity);\n                    } else {\n                        this.activity = activity;\n                        this._loaded();\n                    }\n                }\n            });\n        } else {\n            this.onError.emit({\n                message: 'NOT_FOUND'\n            });\n        }\n    }\n\n    private _loaded() {\n        this.onLoad.emit(this.activity);\n    }\n}\n","import {\n    AfterViewInit, Component, ElementRef, EventEmitter, Input, OnDestroy, Output, TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {SocialActivity} from '../model/Activity';\nimport {BsModalRef, BsModalService} from \"ngx-bootstrap\";\ndeclare let $: any;\n\n@Component({\n    selector: '[socialActivity]',\n    templateUrl: './activity.component.html',\n    styleUrls: ['./activity.component.css']\n})\nexport class ActivityComponent implements AfterViewInit, OnDestroy {\n    @Input() activity: SocialActivity;\n\n    @Output() onUpdated = new EventEmitter<any>();\n    @Output() onDeleted = new EventEmitter<any>();\n\n    @ViewChild('policiesDisplay') policiesDisplay: ElementRef;\n    @ViewChild('tmpConfirmDelete') tmpConfirmDelete: TemplateRef<any>;\n\n    viewDate: string;\n    editing: boolean = false;\n\n    private _modalRef: BsModalRef;\n\n    constructor(\n        private socialService: SocialService,\n        private modalService: BsModalService\n    ) {\n        this.viewDate = this.socialService.viewDate;\n    }\n\n    ngAfterViewInit() {\n        if (this.policiesDisplay) {\n            let title = [];\n            let maxDisplay = 8;\n            for (let i = 0; i < this.activity._policies.length; i++) {\n                title.push(this.activity._policies[i].display);\n                if (title.length >= maxDisplay) {\n                    title.push('v ' + (this.activity._policies.length - maxDisplay) + ' ngi khc...');\n                    break;\n                }\n            }\n            $(this.policiesDisplay.nativeElement)['tooltip']({\n                title: title.join('<br>'),\n                html: true\n            });\n        }\n    }\n\n    ngOnDestroy() {\n        this.declineDelete();\n    }\n\n    activityEdit() {\n        this.editing = true;\n    }\n\n    activityCancelEdit() {\n        this.editing = false;\n    }\n\n    activityDelete() {\n        this._modalRef = this.modalService.show(this.tmpConfirmDelete, {class: 'modal-sm'});\n    }\n\n    confirmDelete() {\n        this.socialService.activityRemove({activity: this.activity.uuid}, (activity: SocialActivity) => {\n            if (activity && activity.uuid) {\n                this.onDeleted.emit(activity);\n            }\n        });\n    }\n\n    declineDelete() {\n        if (this._modalRef) {\n            this._modalRef.hide();\n            this._modalRef = null;\n        }\n    }\n\n    activityLike() {\n        const params = {\n            activity: this.activity.uuid\n        };\n        this.activity.likeStatus = !this.activity.likeStatus;\n        if (this.activity.likeStatus) {\n            this.activity.likeCount++;\n            this.socialService.activityLike(params, data => {\n            });\n        } else {\n            this.activity.likeCount--;\n            this.socialService.activityUnLike(params, data => {\n            });\n        }\n    }\n\n    activityUpdate(data) {\n        this.socialService.activityUpdate(data, (activity: SocialActivity) => {\n            if (activity && activity.uuid) {\n                this.onUpdated.emit(activity);\n                this.editing = false;\n            }\n        });\n    }\n}\n","import {SocialActivity} from \"./Activity\";\n\nexport class SocialComment extends SocialActivity {\n  activityID?: string;\n  policyInherit?: boolean;\n}\n","import {Component, EventEmitter, Input, Output} from '@angular/core';\nimport {SocialComment} from '../model/Comment';\nimport {SocialService} from '../social.service';\n\n@Component({\n    selector: '[socialComment]',\n    templateUrl: './comment.component.html',\n    styleUrls: ['./comment.component.css']\n})\nexport class CommentComponent {\n    @Input() comment: SocialComment;\n    @Input() editable: boolean = true;\n\n    @Output() onUpdated = new EventEmitter<SocialComment>();\n    @Output() onDeleted = new EventEmitter<SocialComment>();\n\n    viewDate: string;\n    editing: boolean;\n\n    constructor(\n        private socialService: SocialService\n    ) {\n        this.viewDate = this.socialService.viewDate;\n    }\n\n    commentCancelEdit() {\n        this.editing = false;\n    }\n\n    commentEdit() {\n        this.editing = true;\n    }\n\n    commentUpdate(params) {\n        this.socialService.commentUpdate(params, (comment: SocialComment) => {\n            if (comment && comment.uuid) {\n                this.commentCancelEdit();\n                this.onUpdated.emit(comment);\n            }\n        });\n    }\n\n    commentDelete() {\n        this.socialService.commentRemove({\n            comment: this.comment.uuid,\n            activity: this.comment.activityID\n        }, (comment: SocialComment) => {\n            if (comment && comment.uuid) {\n                this.onDeleted.emit(comment);\n            }\n        });\n    }\n\n    commentLike() {\n        const params = {\n            activity: this.comment.activityID,\n            comment: this.comment.uuid,\n        };\n        this.comment.likeStatus = !this.comment.likeStatus;\n        if (this.comment.likeStatus) {\n            this.comment.likeCount++;\n            this.socialService.commentLike(params, data => {});\n        } else {\n            this.comment.likeCount--;\n            this.socialService.commentUnLike(params, data => {});\n        }\n    }\n}\n","import {AfterViewInit, Component, ElementRef, OnDestroy, ViewChild} from '@angular/core';\nimport {SocialActivity} from '../model/Activity';\ndeclare let $: any;\n\n@Component({\n  selector: 'app-social-modal-view',\n  templateUrl: './modal-view.component.html',\n  styleUrls: ['./modal-view.component.css']\n})\nexport class SocialModalViewComponent implements AfterViewInit, OnDestroy {\n  @ViewChild('viewModal') viewModal: ElementRef;\n  activity: SocialActivity;\n  $modal: any;\n\n  constructor() { }\n\n  ngAfterViewInit() {\n    this.$modal = $(this.viewModal.nativeElement);\n\n    this.$modal.on('hidden.bs.modal', (e) => {\n      delete this.activity;\n    });\n\n    $(document.body).append(this.$modal);\n  }\n\n  ngOnDestroy() {\n    this.$modal.remove();\n  }\n\n  viewActivity(activity: SocialActivity) {\n    this.activity = activity;\n    setTimeout(() => {\n      this.$modal.modal('show');\n    }, 100);\n  }\n}\n","import {Component, Input, OnChanges, SimpleChanges} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {SocialActivity} from '../model/Activity';\n\n@Component({\n  selector: 'social-activity-view',\n  templateUrl: './activity-view.component.html',\n  styleUrls: ['./activity-view.component.css']\n})\nexport class ActivityViewComponent implements OnChanges {\n  @Input() activityId: string;\n\n  activity: SocialActivity;\n  notFound: boolean;\n  constructor(\n    private socialService: SocialService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.activityId.currentValue !== changes.activityId.previousValue) {\n      this._load();\n    }\n  }\n\n  activityUpdated(activity: SocialActivity) {\n    this.activity = activity;\n  }\n\n  private _load() {\n    this.notFound = false;\n    this.socialService.activityLoad({\n      activity: this.activityId\n    }, (activity: SocialActivity) => {\n      if (activity && activity.uuid) {\n        this.activity = activity;\n      } else {\n        this.notFound = true;\n      }\n    });\n  }\n}\n","import {Component, Input} from '@angular/core';\nimport {SocialActivity} from '../model/Activity';\nimport {SocialComment} from '../model/Comment';\n\n@Component({\n    selector: '[messageBody]',\n    templateUrl: './message-body.component.html',\n    styleUrls: [\n        './message-body.component.css'\n    ]\n})\nexport class MessageBodyComponent {\n    @Input() feed: SocialActivity | SocialComment = {};\n}\n","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: '[localNews]',\n  templateUrl: './localnews.component.html',\n  styleUrls: ['./localnews.component.css']\n})\nexport class LocalNews {\n  @Input() data: LocalNewsData;\n}\n\nexport interface LocalNewsData {\n  image: string\n  title: string\n  description: string\n  url?: string\n}","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {SocialActivity} from '../model/Activity';\nimport {SocialComment} from '../model/Comment';\n\n@Component({\n    selector: '[actionMore]',\n    templateUrl: './activity-action-more.component.html',\n    styleUrls: ['./activity-action-more.component.css']\n})\nexport class ActivityActionMoreComponent implements OnInit {\n    @Input() data: SocialActivity | SocialComment;\n    @Output() onEdit = new EventEmitter<any>();\n    @Output() onDelete = new EventEmitter<any>();\n\n    hasAction: boolean;\n    isActivity: boolean;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n        if (!this.data) {\n            return;\n        }\n        this.isActivity = !this.data.activityID;\n        this.hasAction = this.isActivity && this.data._editable;\n    }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {SocialFriend} from '../../model/SocialFriend';\nimport {SocialService} from '../../social.service';\nimport {FriendTab} from '../FriendTab';\n\n@Component({\n    templateUrl: './friend-browse.component.html',\n    styleUrls: [\n        '../style.css',\n        './friend-browse.component.css'\n    ]\n})\nexport class FriendBrowseComponent implements OnInit, FriendTab {\n    category: string = 'All friends';\n    members: SocialFriend[] = [];\n\n    params: any = {\n        pageSize: 20,\n        pageNumber: 0\n    };\n\n    private _timer;\n\n    constructor(\n        private socialService: SocialService\n    ) {\n    }\n\n    placeholder: string = 'Tm kim bn b...';\n\n    clearSearchValue(): void {\n    }\n\n    onSearch(value: string): void {\n        this._searchMember(value);\n    }\n\n    ngOnInit() {\n        this._searchMember('');\n    }\n\n    inviteFriend(friend) {\n        friend.added = true;\n        this.socialService.invitationCreate({\n            member: friend.username,\n            memberName: friend.fullname,\n            type: 'FRIEND',\n            category: this.category\n        }, (response, error) => {\n        });\n    }\n\n    private _searchMember(keyword: string) {\n        if (this.params.keyword === keyword) {\n            return;\n        }\n        this.params.keyword = keyword;\n        this.params.pageNumber = 0;\n\n        clearTimeout(this._timer);\n        this._timer = setTimeout(() => {\n            this.socialService.invitationSearch(this.params, (respone, error) => {\n                if (this.params.keyword != keyword) {\n                    return;\n                }\n                const members = respone || [];\n                const userCodes = [];\n                this.members = [];\n                members.forEach(item => {\n                    if (userCodes.indexOf(item.username) < 0) {\n                        userCodes.push(item.username);\n                        if (!item.fullname) {\n                            item.fullname = item.username;\n                        }\n                        this.members.push(item);\n                    }\n                });\n            });\n        }, 500);\n    }\n}\n","import {Component, OnInit} from '@angular/core';\nimport {SocialFriend} from '../../model/SocialFriend';\nimport {SocialService} from '../../social.service';\n\n@Component({\n    templateUrl: './friend-invitation.component.html',\n    styleUrls: [\n        '../style.css',\n        './friend-invitation.component.css'\n    ]\n})\nexport class FriendInvitationComponent implements OnInit {\n\n    // Default group\n    category: string = 'Friends';\n\n    invitations: SocialFriend[];\n    noInvitation: boolean;\n\n    invitationsSend: SocialFriend[];\n    noInvitationSend: boolean;\n\n    constructor(\n        private socialService: SocialService\n    ) {\n    }\n\n    ngOnInit() {\n        this._loadReceiveInvite();\n        this._loadSendInvite();\n    }\n\n    acceptInvite(member) {\n        this.socialService.invitationAccept({\n            member: member.inviter,\n            category: member.category\n        }, (response, error) => {\n\n        });\n        this.invitations.splice(this.invitations.indexOf(member), 1);\n        this.noInvitation = this.invitations.length < 1;\n    }\n\n    rejectInvite(member) {\n        this.socialService.invitationReject({\n            member: member.inviter,\n            category: member.category\n        }, (response, error) => {\n\n        });\n        this.invitations.splice(this.invitations.indexOf(member), 1);\n        this.noInvitation = this.invitations.length < 1;\n    }\n\n    removeInvite(member) {\n        this.socialService.invitationDelete({\n            member: member.usercode,\n            category: member.category\n        }, (response, error) => {\n\n        });\n        this.invitationsSend.splice(this.invitationsSend.indexOf(member), 1);\n        this.noInvitationSend = this.invitationsSend.length < 1;\n    }\n\n    private _loadReceiveInvite() {\n        this.socialService.invitationReceiveList({pageSize: -1}, (respone, error) => {\n            this.invitations = respone && respone.items || [];\n            this.noInvitation = this.invitations.length < 1;\n        });\n    }\n\n    private _loadSendInvite() {\n        this.socialService.invitationSendList({pageSize: -1}, (respone, error) => {\n            this.invitationsSend = respone && respone.items || [];\n            this.noInvitationSend = this.invitationsSend.length < 1;\n        });\n    }\n}\n","import {Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\nimport {SocialService} from '../../social.service';\nimport {AccentService, CacheStorageService} from 'inet-core';\n\n@Component({\n    selector: '[socialListUser]',\n    templateUrl: './list-user.component.html',\n    styleUrls: [\n        '../../styles/user-styles.css'\n    ]\n})\nexport class ListUserComponent implements OnInit {\n    @Input() placeholder: string = 'Tm kim...';\n    @Input() height: string = '240px';\n\n    @ViewChild('search') search: ElementRef;\n\n    members: any[] = [];\n    selectMembers: any = [];\n    showMembers: any = [];\n    matchMembers: any = [];\n\n    private _search: HTMLInputElement;\n    private _allEmployees = 'social_employees';\n    private _allFriends = 'social_friends';\n\n    constructor(\n        private socialService: SocialService,\n        private accentService: AccentService,\n        private cacheStorage: CacheStorageService\n    ) {\n\n        const employees = this.cacheStorage.getData(this._allEmployees);\n        // Cache employees on 5 minutes\n        if (employees) {\n            this._initMembers(JSON.parse(employees));\n        } else {\n            this.cacheStorage.promiseQueue(this._allEmployees,\n                (key) => {\n                    this.socialService.searchMember({pageSize: -1}, (users) => {\n                        if (users && users.length > 0) {\n                            this.cacheStorage.setData(key, JSON.stringify(users));\n                        }\n                        this.cacheStorage.resolveQueue(key, this, [users]);\n                    });\n                },\n                (users) => this._initMembers(users));\n        }\n\n        this.cacheStorage.promiseQueue(this._allFriends,\n            (key) => {\n                this.socialService.listFriends({pageSize: -1}, (users) => {\n                    this.cacheStorage.resolveQueue(key, this, [users]);\n                });\n            },\n            (users) => this._initMembers(users));\n    }\n\n    ngOnInit() {\n        this._search = this.search.nativeElement;\n    }\n\n    resetData() {\n        this.selectMembers = [];\n        this.showMembers = [];\n        this.matchMembers = [];\n        this._search.value = '';\n        this.members.forEach(item => delete item.selected);\n    }\n\n    focusInput() {\n        this._search.focus();\n    }\n\n    onSearch() {\n        let value = this._search.value.trim();\n        if (value) {\n            value = this.accentService.viToEn(value.toLowerCase());\n            this.matchMembers = this.members.filter(item => item._index.indexOf(value) > -1);\n        } else {\n            this.matchMembers = this.members;\n        }\n\n        this.showMembers = this.matchMembers;\n    }\n\n    onScroll() {\n\n    }\n\n    addMember(member) {\n        member.selected = !member.selected;\n        if (member.selected) {\n            this.selectMembers.push(member);\n        } else {\n            this.removeMember(member);\n        }\n    }\n\n    removeMember(member) {\n        this.selectMembers.splice(this.selectMembers.indexOf(member), 1);\n    }\n\n    private _initMembers(users: any[]) {\n        users.forEach(item => this._addMember(item));\n        this._sortMembers();\n    }\n\n    private _addMember(member) {\n        member.username = member.username || member.usercode;\n        if (this._hasMember(member)) {\n            return;\n        }\n        member._index = this.accentService.viToEn(member.fullname.toLowerCase()) + ' ' + member.username;\n        this.members.push(member);\n    }\n\n    private _sortMembers() {\n        this.members.sort((a, b) => a.fullname.localeCompare(b.fullname));\n    }\n\n    private _hasMember(member) {\n        for (let i = 0; i < this.members.length; i++) {\n            if (this.members[i].username === member.username) {\n                return true;\n            }\n        }\n    }\n}\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\nimport {ListUserComponent} from '../list-user/list-user.component';\n\n@Component({\n    selector: '[socialGroupMember]',\n    templateUrl: './group-member.component.html',\n    styleUrls: ['./group-member.component.css']\n})\nexport class GroupMemberComponent implements OnInit, OnDestroy {\n    @Input() title: string = 'Thm thnh vin';\n    @Output() onSelect = new EventEmitter<any>();\n\n    @ViewChild('modal') modal;\n    @ViewChild('listUser') listUser: ListUserComponent;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n        document.body.appendChild(this.modal._element.nativeElement);\n    }\n\n    ngOnDestroy() {\n        this.modal._element.nativeElement.remove();\n    }\n\n    open() {\n        this.listUser.resetData();\n        this.modal.show();\n    }\n\n    onShown() {\n        this.listUser.focusInput();\n        this.listUser.onSearch();\n    }\n\n    onSave() {\n        this.onSelect.emit(this.listUser.selectMembers);\n        this.modal.hide();\n    }\n\n    onCancel() {\n        this.modal.hide();\n    }\n}\n","import {Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\nimport {ListUserComponent} from '../list-user/list-user.component';\nimport {SocialService} from '../../social.service';\n\n@Component({\n    selector: '[socialGroupCreate]',\n    templateUrl: './group-create.component.html',\n    styleUrls: ['./group-create.component.css']\n})\nexport class GroupCreateComponent implements OnInit, OnDestroy {\n    @Output() onCreate = new EventEmitter<any>();\n\n    @ViewChild('modal') modal;\n    @ViewChild('inputGroup') inputGroup: ElementRef;\n    @ViewChild('listUser') listUser: ListUserComponent;\n\n    private _input;\n\n    constructor(\n        private socialService: SocialService\n    ) {\n    }\n\n    ngOnInit() {\n        this._input = this.inputGroup.nativeElement;\n        document.body.appendChild(this.modal._element.nativeElement);\n    }\n\n    ngOnDestroy() {\n        this.modal._element.nativeElement.remove();\n    }\n\n    open() {\n        this._input.value = '';\n        this.listUser.resetData();\n        this.modal.show();\n    }\n\n    onShown() {\n        this._input.focus();\n        this.listUser.onSearch();\n    }\n\n    onSave() {\n        let params = {\n            category: this._input.value.trim(),\n            member: this.listUser.selectMembers.map(item => item.username).join(',')\n        };\n        if (!params.category) {\n            this._input.focus();\n            return;\n        }\n\n        if (!params.member) {\n            this.listUser.focusInput();\n            return;\n        }\n\n        this.socialService.groupMemberCreate(params, (data) => {\n            this.onCreate.emit(data);\n        });\n\n        this.modal.hide();\n    }\n\n    onCancel() {\n        this.modal.hide();\n    }\n}\n","import {Component, OnDestroy, OnInit, TemplateRef, ViewChild} from '@angular/core';\nimport {SocialService} from \"../../social.service\";\nimport {NavigationEnd, Router} from \"@angular/router\";\nimport {GroupMemberComponent} from \"../group-member/group-member.component\";\nimport {GroupCreateComponent} from \"../group-create/group-create.component\";\nimport {BsModalService} from 'ngx-bootstrap';\nimport {FriendTab} from '../FriendTab';\nimport {AccentService} from 'inet-core';\nimport {filter} from \"rxjs/operators\";\n\n@Component({\n  templateUrl: './group.component.html',\n  styleUrls: [\n    '../style.css',\n    './group.component.css'\n  ]\n})\nexport class SocialGroupComponent implements OnInit, OnDestroy, FriendTab {\n  @ViewChild('modalCreateMember') modalCreateMember: GroupCreateComponent;\n  @ViewChild('modalAddMember') modalAddMember: GroupMemberComponent;\n\n  viewGroups: boolean;\n  groups: string[];\n  friends: any[] = [];\n\n  viewMembers: boolean;\n  members: any[] = [];\n  groupView: string;\n  groupActive: string;\n  memberActive: any;\n\n  modalGroupDeleteRef: any;\n  modalMemberDeleteRef: any;\n\n  noGroups: boolean;\n  noFriends: boolean;\n  searching: boolean;\n\n  private _prefix = '/social/friend';\n  private _router;\n\n  constructor(\n    private socialService: SocialService,\n    private accentService: AccentService,\n    private router: Router,\n    private modalService: BsModalService\n  ) {\n    this._loadAllFriends();\n  }\n\n  placeholder = 'Tm kim...';\n  onSearch(value: string) {\n    this.searching = !!value;\n    if (value) {\n      value = this.accentService.viToEn(value);\n      if (this.viewGroups) {\n        this.friends.forEach(item => {\n          item.hidden = item._index.indexOf(value) < 0;\n        });\n      } else {\n        this.members.forEach(item => {\n          item.hidden = item._index.indexOf(value) < 0;\n        });\n      }\n    } else {\n      if (this.viewGroups) {\n        this.friends.forEach(item => delete item.hidden);\n      } else {\n        this.members.forEach(item => delete item.hidden);\n      }\n    }\n  }\n  clearSearchValue() { }\n\n  ngOnInit() {\n    this._router = this.router.events\n      .pipe(filter(event => event instanceof NavigationEnd))\n      .subscribe(() => {\n        this._actionView();\n      });\n    this._actionView();\n  }\n\n  ngOnDestroy() {\n    this._router.unsubscribe();\n  }\n\n  createGroup() {\n    this.modalCreateMember.open();\n  }\n\n  groupCreated() {\n    this._loadGroups();\n    this._loadAllFriends();\n  }\n\n  viewGroup(group: string) {\n    this.router.navigate([this._prefix + '/' + group]);\n  }\n\n  removeGroup(group: string, template: TemplateRef<any>) {\n    this.groupActive = group;\n    this.modalGroupDeleteRef = this.modalService.show(template);\n  }\n\n  // Todo: improve remove group\n  onDeleteGroup() {\n    this.modalGroupDeleteRef.hide();\n    this._loadFriends(this.groupActive, (members) => {\n      this.socialService.groupMemberDelete({\n        category: this.groupActive,\n        member: this._getMemberStr(members)\n      }, () => {\n        this._loadGroups();\n        this._loadAllFriends();\n        if (!this.viewGroups) {\n          this.toGroups();\n        }\n      });\n    });\n    this.groups.splice(this.groups.indexOf(this.groupActive), 1);\n  }\n\n  removeFriend(friend, template: TemplateRef<any>) {\n    this.modalMemberDeleteRef = this.modalService.show(template);\n    this.memberActive = friend;\n  }\n\n  onDeleteMember() {\n    const promises = [];\n    if (this.memberActive.categories) {\n      // Member on groups\n      this.memberActive.categories.forEach(category => {\n        promises.push(this._deleteMemberPromise(this.memberActive.usercode, category));\n      });\n    } else {\n      promises.push(this._deleteMemberPromise(this.memberActive.usercode, this.memberActive.category));\n    }\n\n    Promise.all(promises).then(values => {\n      if (this.groupView) {\n        this._loadMembers();\n      }\n      this._loadAllFriends();\n    });\n    this.modalMemberDeleteRef.hide();\n  }\n\n  private _deleteMemberPromise(usercode, category) {\n    return new Promise((resolve, reject) => {\n      this.socialService.groupMemberDelete({\n        category: category,\n        member: usercode\n      }, resolve);\n    });\n  }\n\n  addMemberGroup() {\n    this.modalAddMember.open();\n  }\n\n  saveMemberGroup(members) {\n    this.socialService.groupMemberCreate({\n      category: this.groupView,\n      member: this._getMemberStr(members)\n    }, () => {\n      this._loadMembers();\n      this._loadAllFriends();\n    });\n  }\n\n  toGroups() {\n    this.router.navigate([this._prefix]);\n  }\n\n  private _viewGroup() {\n    this.viewGroups = true;\n    this.groupView = '';\n    if (!this.groups) {\n      this._loadGroups();\n    }\n  }\n\n  private _loadGroups() {\n    this.noGroups = false;\n    this.socialService.listGroups(groups => {\n      this.groups = groups;\n      this.noGroups = groups.length < 1;\n    });\n  }\n\n  private _viewGroupMember(group: string) {\n    this.viewMembers = true;\n    this.members = [];\n    this.groupView = group;\n    this._loadMembers();\n  }\n\n  private _loadMembers() {\n    this._loadFriends(this.groupView, users => this.members = users);\n  }\n\n  private _loadAllFriends() {\n    this.friends = [];\n    this.noFriends = false;\n    this._loadFriends('', users => {\n      const tmp = [];\n      users.forEach(item => {\n        const index = tmp.indexOf(item.usercode);\n        if (index < 0) {\n          tmp.push(item.usercode);\n          item.categories = [item.category];\n          this.friends.push(item);\n        } else {\n          this.friends[index].categories.push(item.category);\n        }\n      });\n      this.noFriends = this.friends.length < 1;\n    });\n  }\n\n  private _loadFriends(category: string, callback) {\n    this.socialService.listFriends({\n      pageSize: -1,\n      category: category\n    }, (users) => {\n      users.forEach(item => {\n        item._index = this._indexSearch(item.fullname) + ' ' + item.usercode;\n      });\n      callback(users);\n    });\n  }\n\n  private _getMemberStr(members: any[]): string {\n    return members.map(item => item.usercode || item.username).join(',');\n  }\n\n  private _actionView() {\n    this.viewGroups = this.viewMembers = false;\n    const group = this.router.url.split('/')[3];\n\n    this.clearSearchValue();\n\n    if (!group) {\n      this._viewGroup();\n    } else {\n      this._viewGroupMember(decodeURIComponent(group));\n    }\n  }\n\n  private _indexSearch(value: string) {\n    return this.accentService.viToEn(value.toLowerCase());\n  }\n}\n","import {Component, EventEmitter, Output, Input, ViewChild, ElementRef, OnInit} from '@angular/core';\nimport {SocialComment} from '../model/Comment';\nimport {AutoSizeDirective} from 'inet-core';\nimport {FileListItem} from 'inet-ui';\nimport {SocialService} from \"../social.service\";\nimport {ProgressComponent} from \"../progress/progress.component\";\n\n@Component({\n    selector: '[commentPost]',\n    templateUrl: './comment-post.component.html',\n    styleUrls: ['./comment-post.component.css']\n})\nexport class CommentPostComponent implements OnInit {\n    @Input() placeholder: string = 'Ni dung tho lun..';\n    @Input() commentEdit: SocialComment;\n\n    @Output() onCancel = new EventEmitter<any>();\n    @Output() onPost = new EventEmitter<any>();\n\n    @ViewChild('messageEl') messageEl: ElementRef;\n    @ViewChild(AutoSizeDirective) messageAutoSize: AutoSizeDirective;\n    @ViewChild(ProgressComponent) indicator: ProgressComponent;\n\n    message: string = '';\n    files: FileListItem[] = [];\n    removeFiles: FileListItem[] = [];\n\n    constructor(private socialService: SocialService) { }\n\n    ngOnInit() {\n        if (this.commentEdit) {\n            this.editComment(this.commentEdit);\n        }\n    }\n\n    enterPost(event) {\n        event.preventDefault();\n        this.doPost();\n    }\n\n    doPost() {\n        const params = this.getData();\n        if (!params.message) {\n            return this.focusMessage();\n        }\n        this.onPost.emit(params);\n        this.indicator.show();\n    }\n\n    doCancel() {\n        this.onCancel.emit(this.commentEdit);\n        if (this.commentEdit) {\n            this.resetForm();\n        }\n    }\n\n    getData() {\n        let params: any = {\n            message: this.message\n        };\n\n        for (let i = 0; i < this.files.length; i++) {\n            if (!this.files[i].id) {\n                params['file-' + i] = this.files[i];\n            }\n        }\n\n        if (this.commentEdit) {\n            params.activity = this.commentEdit.activityID;\n            params.comment = this.commentEdit.uuid;\n            params.gridfsUUID = this._getRemoveFiles();\n        }\n\n        return params;\n    }\n\n    editComment(comment: SocialComment) {\n\n        this.resetForm();\n\n        this.commentEdit = comment;\n\n        this.files = this.socialService.attachmentToFiles(comment.attachments);\n\n        this.message = comment.message;\n\n        this.focusMessage();\n\n        // Trigger input to adjust size\n        this._resizeInput();\n\n    }\n\n    resetForm() {\n        // Clear data\n        this.message = '';\n\n        this.files.length = 0;\n        this.removeFiles.length = 0;\n\n        this._resizeInput();\n\n        if (this.indicator) {\n            this.indicator.hide();\n        }\n    }\n\n    focusMessage() {\n        this.messageEl.nativeElement.focus();\n    }\n\n    private _getRemoveFiles(): string {\n        return this.removeFiles.filter(file => file.id).map(file => file.id).join(',');\n    }\n\n    private _resizeInput() {\n        setTimeout(() => {\n            this.messageAutoSize.adjust();\n        }, 0);\n    }\n}\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    ViewChild\n} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {SocialActivity} from '../model/Activity';\nimport {SocialComment} from '../model/Comment';\nimport {Subscription} from \"rxjs\";\nimport {CommentPostComponent} from \"../comment-post/comment-post.component\";\n\n@Component({\n    selector: '[socialCommentList]',\n    templateUrl: './comment-list.component.html',\n    styleUrls: ['../comment/comment.component.css']\n})\nexport class CommentListComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() activity: SocialActivity;\n    @Input() allowComment: boolean = true;\n\n    @Output() commentLoad = new EventEmitter<any>();\n\n    @ViewChild(CommentPostComponent) commentPost: CommentPostComponent;\n\n    remainComments: number;\n    viewDate: string;\n\n    private commentParams: any = {\n        pageSize: 5,\n        pageNumber: 0\n    };\n\n    private _commentChange: Subscription;\n\n    constructor(\n        protected socialService: SocialService\n    ) {\n\n        this.viewDate = this.socialService.viewDate;\n\n        // Receive comment notify real time\n        this._commentChange = this.socialService.commentChange.subscribe(activityId => {\n            if (activityId === this.activity.uuid) {\n                this.load(true);\n            }\n        });\n    }\n\n    ngOnInit() {\n        // this.load(true);\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.load(true);\n    }\n\n    ngOnDestroy() {\n        this._commentChange.unsubscribe();\n    }\n\n    focusForm() {\n        if (this.commentPost) {\n            this.commentPost.focusMessage();\n        }\n    }\n\n    commentCreate(params: any) {\n        params.activity = this.activity.uuid;\n        this.socialService.commentPost(params, this.commentPosted.bind(this));\n    }\n\n    load(isInit?: boolean) {\n        if (isInit) {\n            this.commentParams.pageNumber = 0;\n        } else {\n            this.commentParams.pageNumber++;\n        }\n\n        this.commentParams.activity = this.activity.uuid;\n\n        if (!this.activity.comments) {\n            this.activity.comments = [];\n        }\n\n        this.socialService.commentWall(this.commentParams, data => {\n            const comments = data && data['items'] || [];\n            comments.forEach(comment => this.replaceOrAddComment(comment));\n\n            this.activity.comments.sort(function (a, b) {\n                return b.posted - a.posted;\n            });\n\n            this.remainComments =\n                (data.total - (this.commentParams.pageNumber + 1) * this.commentParams.pageSize) || 0;\n\n            this.commentLoad.emit(data);\n        });\n    }\n\n    commentUpdated(comment: SocialComment) {\n        this.replaceOrAddComment(comment);\n    }\n\n    commentDeleted(comment: SocialComment) {\n        this.removeComment(comment.uuid);\n    }\n\n    private commentPosted(comment: SocialComment, err: any) {\n        if (comment && comment.uuid && this.commentPost) {\n            this.commentPost.resetForm();\n            this.replaceOrAddComment(comment, true);\n        }\n    }\n\n    private getIndexComment(uuid: string): number {\n        for (let i = 0; i < this.activity.comments.length; i++) {\n            if (this.activity.comments[i].uuid === uuid) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    private replaceOrAddComment(comment: SocialComment, insertAtFirst?: boolean) {\n        const index = this.getIndexComment(comment.uuid);\n        if (index > -1) {\n            this.activity.comments[index] = comment;\n        } else {\n            this.activity.comments[insertAtFirst ? 'unshift' : 'push'](comment);\n        }\n    }\n\n    protected removeComment(uuid: string) {\n        const index = this.getIndexComment(uuid);\n        if (index > -1) {\n            this.activity.comments.splice(index, 1);\n        }\n    }\n}\n","import {Component, OnDestroy, ViewChild, OnInit, Input} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {ActivityParams} from '../model/ActivityParams';\nimport {SocialActivity} from '../model/Activity';\nimport {ActivityPostComponent} from '../activity-post/activity-post.component';\nimport {Subscription} from \"rxjs\";\n\n@Component({\n    selector: '[socialActivityList]',\n    templateUrl: './activity-list.component.html',\n    styleUrls: ['./activity-list.component.css']\n})\nexport class ActivityListComponent implements OnInit, OnDestroy {\n    @ViewChild('activityPost') activityPost: ActivityPostComponent;\n    @Input() postEnable: boolean = true;\n    @Input() scroller: HTMLElement | any = document;\n    @Input() type: string = '';\n    @Input() application: string = '';\n    @Input() loader: Function = (params, callback) => this.doLoadWall(params, callback);\n\n    activities: SocialActivity[] = [];\n    showLoading: boolean = true;\n    hasMore: boolean = false;\n    params: ActivityParams = {\n        pageSize: 5,\n        pageNumber: 0\n    };\n\n    private _activityChange: Subscription;\n    private _loading: boolean;\n\n    constructor(\n        public socialService: SocialService\n    ) {\n        // Receive activity notify real time\n        this._activityChange = this.socialService.activityChange.subscribe(activityId => {\n            if (activityId) {\n                this.socialService.activityLoad({\n                    activity: activityId\n                }, (activity: SocialActivity) => {\n                    if (activity && activity.uuid) {\n                        this._addActivity(activity, true);\n                    }\n                });\n            }\n        });\n    }\n\n    ngOnInit() {\n        this.initScroller();\n        this.loadWall(true);\n    }\n\n    ngOnDestroy() {\n        this.removeEventScroller();\n        this._activityChange.unsubscribe();\n    }\n\n    removeActivityById(id: string) {\n        for (let i = 0; i < this.activities.length; i++) {\n            const activity = this.activities[i];\n            if (activity.uuid === id) {\n                this.activities.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    loadWall(init?: boolean) {\n\n        if (init) {\n            this.clearWall();\n            this.params.pageNumber = 0;\n            this.showLoading = true;\n\n            if (this.type) {\n                this.params.type = this.type;\n            }\n\n            if (this.application) {\n                this.params.application = this.application;\n            }\n\n        }\n\n        this._loading = true;\n\n        this.loader(this.params, (data, err) => this._renderWall(data));\n    }\n\n    doLoadWall(params, callback) {\n        this.socialService.activityWall(params, callback);\n    }\n\n    clearWall() {\n        this.activities.length = 0;\n    }\n\n    private _renderWall(data) {\n        if (data) {\n            const activities = data['items'] || [];\n            activities.forEach(activity => this._addActivity(activity));\n            this.hasMore = data['total'] > this.activities.length;\n        }\n\n        this.showLoading = false;\n\n        setTimeout(() => {\n            this._loading = false;\n            this._scrollBottomListener();\n        }, 1000);\n    }\n\n    activityCreate(params: any) {\n        if (params.activity) {\n            this.socialService.activityUpdate(params, this._activityPosted.bind(this));\n        } else {\n            this.socialService.activityPost(params, this._activityPosted.bind(this));\n        }\n    }\n\n    activityUpdated(activity: SocialActivity) {\n\n        // Replace by activity updated\n        for (let i = 0; i < this.activities.length; i++) {\n            if (this.activities[i].uuid === activity.uuid) {\n                this.activities[i] = activity;\n                return;\n            }\n        }\n        this.activities.unshift(activity);\n    }\n\n    activityDeleted(activity: SocialActivity) {\n        this.removeActivityById(activity.uuid);\n    }\n\n    initScroller() {\n        this._scrollBottomListener = this._scrollBottomListener.bind(this);\n        if (this.scroller) {\n            this.initEventScroller(this.scroller);\n        }\n    }\n\n    scrollToTop() {\n        if (this.scroller) {\n            this.scroller.scrollTop = 0;\n        }\n    }\n\n    initEventScroller(scroller: HTMLElement | any) {\n        this.scroller = scroller;\n        this.scroller.addEventListener('scroll', this._scrollBottomListener);\n    }\n\n    removeEventScroller() {\n        if (this.scroller) {\n            this.scroller.removeEventListener('scroll', this._scrollBottomListener);\n        }\n    }\n\n    private _scrollBottomListener(e?: any) {\n        if (this._loading || !this.hasMore) {\n            return;\n        }\n        const scroller = e && e.target || this.scroller;\n        const target = scroller.scrollingElement || scroller;\n        if (target) {\n\n            // Scroll bottom to load more\n            const bottom = target.scrollHeight - target.scrollTop - target.clientHeight;\n\n            if (bottom < 150) {\n                this.params.pageNumber++;\n                this.loadWall();\n            }\n        }\n    }\n\n    private _activityPosted(activity: SocialActivity, err: any) {\n        if (activity && activity.uuid) {\n            this.activityPost.resetForm();\n            this.activityPost.hideForm(true);\n            this._addActivity(activity, true);\n        }\n    }\n\n    private _addActivity(activity: SocialActivity, insertAtFirst?: boolean) {\n        this.removeActivityById(activity.uuid);\n        if (insertAtFirst) {\n            this.activities.unshift(activity);\n        } else {\n            this.activities.push(activity);\n        }\n    }\n}\n","import {Component, Input, OnChanges, SimpleChanges} from '@angular/core';\nimport {SocialService} from '../social.service';\nimport {Attachment} from '../model/Attachment';\nimport {Photo, FileListItem} from \"inet-ui\";\n\n@Component({\n    selector: '[attachmentList]',\n    templateUrl: './attachment-list.component.html',\n    styleUrls: ['./attachment-list.component.css']\n})\nexport class AttachmentListComponent implements OnChanges {\n    @Input() attachments: Attachment[] = [];\n    files: FileListItem[] = [];\n    private _images: Photo[];\n\n    constructor(private socialService: SocialService) { }\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.attachments) {\n            this._indexFiles();\n        }\n    }\n\n    viewImage(file: FileListItem, imageEl: HTMLElement) {\n        const options = {\n            index: this._getImageIndex(file.id),\n            clickElement: imageEl\n        };\n        this.socialService.viewImages(this._images, options);\n    }\n\n    viewAttachment(data) {\n        const file = data.file;\n        const attachment = this._getAttachmentById(file.id);\n        if (attachment) {\n            if (file.image) {\n                let imageEl: HTMLElement = data.event.target;\n                if (imageEl.tagName !== 'IMG') {\n                    // click on image's parent\n                    imageEl = imageEl.getElementsByTagName('img')[0];\n                }\n\n                this.viewImage(file, imageEl);\n            } else {\n                this.socialService.viewAttachment(attachment);\n            }\n        }\n    }\n\n    private _getAttachmentById(id: string): Attachment {\n        for (let i = 0; i < this.attachments.length; i++) {\n            if (this.attachments[i].gridfsUUID === id) {\n                return this.attachments[i];\n            }\n        }\n    }\n\n    private _getImageIndex(id: string): number {\n        for (let i = 0; i < this._images.length; i++) {\n            if (this._images[i].id === id) {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n    private _indexFiles() {\n        this.files = this.socialService.attachmentToFiles(this.attachments);\n\n        // Index images to view later\n        this._images = [];\n        for (let i = 0; i < this.files.length; i++) {\n            if (this.files[i].image) {\n                const attachment = this.attachments[i];\n                this._images.push({\n                    src: attachment.pathView,\n                    id: attachment.gridfsUUID,\n                    w: 1,\n                    h: 1,\n                    sizeDynamic: true\n                });\n            }\n        }\n    }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {SocialActivity} from \"../model/Activity\";\nimport {SocialService} from \"../social.service\";\nimport {SocialComment} from \"../model/Comment\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n    selector: 'social-latest',\n    templateUrl: './social-latest.component.html',\n    styleUrls: ['./social-latest.component.css']\n})\nexport class SocialLatestComponent implements OnInit {\n    @Input() viewMoreEnable: boolean = true;\n\n    activities: SocialActivity[] = [];\n\n    constructor(private socialService: SocialService, private router: Router) {}\n\n    ngOnInit() {\n        this._loadLatest();\n    }\n\n    viewActivity(activity: SocialActivity) {\n        // this.onViewItem.emit(activity);\n        this.router.navigate(['social/activity/' + (activity['activityID'] || activity['uuid'])]);\n    }\n\n    viewMore() {\n        // this.onViewMore.emit();\n        this.router.navigate(['social']);\n    }\n\n    private _loadLatest() {\n        this.socialService.activityWall({\n            pageSize: 3\n        },  (result) => {\n            const items = result && result['items'] || [];\n            if (items.length > 0) {\n                this._updateWithCommentLatest(items, () => {\n                    items.sort((a, b) => (b.lastUpdate || b.posted) - (a.lastUpdate || a.posted));\n                    this.activities = items;\n                });\n            }\n        });\n    }\n\n    private _updateWithCommentLatest(activities: SocialActivity[], callback: Function) {\n        const promises = [];\n        activities.forEach((activity, index) => {\n            promises.push(new Promise((resolve) => {\n                this.socialService.commentWall({pageSize: 1, activity: activity.uuid}, (result) => {\n                    const items: SocialComment[] = result && result['items'] || [];\n                    if (items.length > 0) {\n                        // Replace activity by latest comment\n                        activities[index] = items[0];\n                    }\n                    resolve();\n                });\n            }));\n        });\n        Promise.all(promises).then(() => callback());\n    }\n}\n","import {Injectable} from '@angular/core';\n\ndeclare let iNet: any;\n\nconst FILES_FORMAT = [\n    'unknown', 'text', 'archive', 'audio', 'video',\n    'png', 'jpg', 'gif', 'tiff', 'svg', 'ai', 'psd', 'dwg',\n    'avi', 'fla', 'mp2', 'mp3', 'mp4', 'aac', 'flac', 'wma', 'wav', 'mxf',\n    'iso', 'mdf', 'nrg',\n    'zip', '7z', 'arj', 'rar',\n    'pdf', 'doc', 'rtf', 'txt', 'xls', 'ppt',\n    'css', 'csv', 'html', 'json', 'js', 'xml',\n    'dbf', 'exe'\n];\n\nconst FILES_EDIT_FORMAT = [\n    'doc', 'docx', 'odt', 'ods', 'xls', 'xlsx',\n    'ppt', 'pps', 'pptm', 'pptx','pot', 'potx',\n    'dot', 'dotx', 'docm','dotx', 'csv' , 'sxw']\n;\n\nconst FILES_VIEW_FORMAT = ['pdf', 'png', 'jpg' ,'jpeg' , 'gif'];\n\nconst UNKNOWN = 'unknown';\n\n@Injectable()\nexport class FileFormatService {\n\n    constructor() {}\n\n    getImagePath(): string {\n        let path =  iNet.commonImageFolder;\n        const lastIndex = path.lastIndexOf('/');\n        if (lastIndex === path.length - 1) {\n            return path.substring(0, lastIndex);\n        }\n        return path;\n    }\n\n    getFileFormatPath(): string {\n        return `${this.getImagePath()}/format`;\n    }\n\n    getUrlByExt(ext: string) {\n        const path = this.getFileFormatPath();\n        if (FILES_FORMAT.indexOf(ext) > -1) {\n            return `${path}/${ext.toLowerCase()}.svg`\n        }\n        return `${path}/${UNKNOWN}.svg`\n    }\n\n    getUrlByName(name: string) {\n        return this.getUrlByExt(this.getExtByName(name));\n    }\n\n    getExtByName(name: string) {\n        return name.split('.').pop().toLowerCase() || UNKNOWN;\n    }\n\n    getEditFormats(): string[] {\n        return FILES_EDIT_FORMAT;\n    }\n\n    getViewFormats(): string[] {\n        return FILES_VIEW_FORMAT;\n    }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {FileFormatService} from \"./file-format.service\";\n\n@Pipe({\n    name: 'fileExt'\n})\nexport class FileExtPipe implements PipeTransform {\n    constructor(private formatService: FileFormatService) {\n    }\n\n    transform(name: string): string {\n        return this.formatService.getExtByName(name);\n    }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {FileFormatService} from \"./file-format.service\";\n\n@Pipe({\n    name: 'fileIcon'\n})\nexport class FileIconPipe implements PipeTransform {\n\n    constructor(private formatService: FileFormatService) {\n\n    }\n\n    transform(name: string): string {\n        return this.formatService.getUrlByName(name);\n    }\n\n}\n","import {Component, EventEmitter, Input, OnInit, Output, TemplateRef} from '@angular/core';\nimport {NgxGalleryAnimation, NgxGalleryImage, NgxGalleryOptions} from \"ngx-gallery\";\n\n@Component({\n    selector: 'file-list',\n    templateUrl: './file-list.component.html',\n    styleUrls: ['./file-list.component.css']\n})\nexport class FileListComponent implements OnInit {\n    @Input() fileEl: HTMLInputElement;\n    @Input() files: FileListItem[] = [];\n    @Input() removable: boolean = true;\n    @Input() template: TemplateRef<any>;\n\n    @Output() onClick = new EventEmitter<any>();\n    @Output() onRemove = new EventEmitter<FileListItem>();\n    galleryOptions: NgxGalleryOptions[];\n    galleryImages: NgxGalleryImage[];\n    ngOnInit(): void {\n        console.log('files', this.files.length, this.files)\n        this.galleryOptions = [\n            {\n                width: '600px',\n                height: '400px',\n                thumbnailsColumns: 4,\n                imageAnimation: NgxGalleryAnimation.Slide\n            },\n            // max-width 800\n            {\n                breakpoint: 800,\n                width: '100%',\n                height: '600px',\n                imagePercent: 80,\n                thumbnailsPercent: 20,\n                thumbnailsMargin: 20,\n                thumbnailMargin: 20\n            },\n            // max-width 400\n            {\n                breakpoint: 400,\n                preview: false\n            }\n        ];\n\n        this.galleryImages = [\n            {\n                small: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                medium: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                big: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max'\n            },\n            {\n                small: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                medium: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                big: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max'\n            },\n            {\n                small: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                medium: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max',\n                big: 'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max'\n            }\n        ];\n        this._initFileEl();\n    }\n\n    clickFile(file: FileListItem, event) {\n        this.onClick.emit({file, event});\n    }\n\n    removeFile(file: FileListItem) {\n        const index = this.files.indexOf(file);\n        if (index > -1) {\n            this.files.splice(index, 1);\n            this.onRemove.emit(file);\n        }\n    }\n\n    addFiles(files: FileList | File[]) {\n        // Read as base64 if image\n        for (let i  = 0; i < files.length; i++) {\n            let file = files[i];\n            if (this._fileIsImage(file)) {\n                file['image'] = true;\n                this._readImageBase64(file);\n            }\n            this.files.push(file);\n        }\n    }\n\n    private _initFileEl() {\n        if (this.fileEl) {\n            this.fileEl.addEventListener('change', (e) => {\n                const files = this.fileEl.files;\n                if (files.length > 0) {\n                    // Read as base64 if image\n                    this.addFiles(files);\n\n                    // Reset file\n                    this.fileEl.value = '';\n                }\n            });\n        }\n    }\n\n    private _readImageBase64(file) {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = function() {\n            file.url = reader.result;\n        };\n    }\n\n    private _fileIsImage(file: FileListItem) {\n        return file.type && file.type.indexOf('image') > -1;\n    }\n}\n\nexport interface FileListItem extends File {\n    id?: string;\n    url?: string;\n    image?: boolean;\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FileExtPipe} from './file-ext.pipe';\nimport {FileIconPipe} from './file-icon.pipe';\nimport {FileFormatService} from './file-format.service';\nimport {FileListComponent} from \"./list/file-list.component\";\nimport {NgxGalleryModule} from \"ngx-gallery\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        NgxGalleryModule\n    ],\n    declarations: [\n        FileIconPipe,\n        FileExtPipe,\n        FileListComponent\n    ],\n    exports: [\n        FileIconPipe,\n        FileExtPipe,\n        FileListComponent\n    ],\n    providers: [FileFormatService]\n})\nexport class FileListModule {\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {SocialService} from './social.service';\nimport {SocialComponent} from './wall/social.component';\nimport {ActivityPostComponent} from './activity-post/activity-post.component';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {BsDropdownModule} from 'ngx-bootstrap';\nimport {SocialEmbedComponent} from './embed/social-embed.component';\nimport {ActivityComponent} from './activity/activity.component';\nimport {CommentComponent} from './comment/comment.component';\nimport {SocialModalViewComponent} from './modal-view/modal-view.component';\nimport {ActivityViewComponent} from './activity-view/activity-view.component';\nimport {ShareMemberComponent} from './share-member/share-member.component';\nimport {ModalModule} from 'ngx-bootstrap/modal';\nimport {MessageBodyComponent} from './message-body/message-body.component';\nimport {LocalNews} from './localnews/localnews.component';\nimport {ActivityActionMoreComponent} from './activity-action-more/activity-action-more.component';\nimport {FriendBrowseComponent} from './social-friend/browse/friend-browse.component';\nimport {FriendInvitationComponent} from './social-friend/invitation/friend-invitation.component';\nimport {SocialGroupComponent} from './social-friend/group/group.component';\nimport {ListUserComponent} from './social-friend/list-user/list-user.component';\nimport {GroupCreateComponent} from './social-friend/group-create/group-create.component';\nimport {GroupMemberComponent} from './social-friend/group-member/group-member.component';\nimport {AccentService, CacheStorageService, CoreModule} from 'inet-core';\nimport {CommentListComponent} from \"./comment-list/comment-list.component\";\nimport {ActivityListComponent} from \"./activity-list/activity-list.component\";\nimport {CommentPostComponent} from \"./comment-post/comment-post.component\";\nimport {AttachmentListComponent} from \"./attachment-list/attachment-list.component\";\nimport {ProgressComponent} from \"./progress/progress.component\";\nimport {SocialLatestComponent} from \"./widget/social-latest.component\";\nimport {FileListModule} from \"./filelist/file-list.module\";\nimport {\n    AutocompleteModule,\n    DateTimeModule,\n    FrontViewModule,\n    OpenGraphModule,\n    PhotoSwipeModule,\n    FileFormatService\n} from \"inet-ui\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        PhotoSwipeModule,\n        ReactiveFormsModule,\n        OpenGraphModule,\n        AutocompleteModule,\n        BsDropdownModule.forRoot(),\n        ModalModule.forRoot(),\n        FrontViewModule,\n        CoreModule,\n        FileListModule,\n        DateTimeModule\n    ],\n    exports: [\n        ProgressComponent,\n        ActivityPostComponent,\n        ActivityComponent,\n        ActivityListComponent,\n        AttachmentListComponent,\n        CommentComponent,\n        CommentPostComponent,\n        CommentListComponent,\n        ShareMemberComponent,\n        MessageBodyComponent,\n        LocalNews,\n        ActivityActionMoreComponent,\n        SocialModalViewComponent,\n        SocialComponent,\n        SocialEmbedComponent,\n        ActivityViewComponent,\n        FriendBrowseComponent,\n        FriendInvitationComponent,\n        SocialGroupComponent,\n        ListUserComponent,\n        GroupCreateComponent,\n        GroupMemberComponent,\n        SocialLatestComponent\n    ],\n    declarations: [\n        ProgressComponent,\n        ActivityPostComponent,\n        ActivityComponent,\n        ActivityListComponent,\n        AttachmentListComponent,\n        CommentComponent,\n        CommentPostComponent,\n        CommentListComponent,\n        ShareMemberComponent,\n        MessageBodyComponent,\n        LocalNews,\n        ActivityActionMoreComponent,\n        SocialModalViewComponent,\n        SocialComponent,\n        SocialEmbedComponent,\n        ActivityViewComponent,\n        FriendBrowseComponent,\n        FriendInvitationComponent,\n        SocialGroupComponent,\n        ListUserComponent,\n        GroupCreateComponent,\n        GroupMemberComponent,\n        SocialLatestComponent\n    ],\n    entryComponents: [\n        FriendInvitationComponent,\n        FriendBrowseComponent,\n        SocialGroupComponent\n    ],\n    providers: [\n        SocialService,\n        CacheStorageService,\n        AccentService,\n        FileFormatService\n    ]\n})\nexport class SocialModule {\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  templateUrl: './social-home.component.html',\n  styleUrls: ['./social-home.component.css']\n})\nexport class SocialHomeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {ActivatedRoute, NavigationEnd, Router} from \"@angular/router\";\nimport {filter} from \"rxjs/operators\";\n\n@Component({\n  templateUrl: './social-activity-view.component.html',\n  styleUrls: ['../home/social-home.component.css']\n})\nexport class SocialActivityViewComponent implements OnInit, OnDestroy {\n  activityId: string;\n  private _routerObserver;\n\n  constructor(\n      private route: ActivatedRoute,\n      private router: Router\n  ) { }\n\n  ngOnInit() {\n    this._routerObserver = this.router.events\n        .pipe(filter(event => event instanceof NavigationEnd))\n        .subscribe(() => this._updateActivityId());\n    this._updateActivityId();\n  }\n\n  ngOnDestroy() {\n    this._routerObserver.unsubscribe();\n  }\n\n  private _updateActivityId() {\n    const params = this.route.snapshot.paramMap;\n    if (params.get('id')) {\n      this.activityId = params.get('id');\n    }\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\nimport {SocialHomeComponent} from \"./home/social-home.component\";\nimport {SocialActivityViewComponent} from \"./activity-view/social-activity-view.component\";\n\nconst routes: Routes = [\n    {\n        path: 'activity/social',\n        component: SocialHomeComponent\n    },\n    {\n        path: 'activity/social/activity/:id',\n        component: SocialActivityViewComponent\n    },\n    {\n        path: 'activity/social/**',\n        redirectTo: 'activity/social',\n        pathMatch: 'full'\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class SocialRoutingModule {\n}\n","import {Component, ComponentRef, OnInit, ViewChild, ViewContainerRef} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {Router} from \"@angular/router\";\nimport {NavigationData} from \"inet-ui\";\nimport {SocialGroupComponent} from \"../../social-friend/group/group.component\";\nimport {FriendInvitationComponent} from \"../../social-friend/invitation/friend-invitation.component\";\nimport {FriendBrowseComponent} from \"../../social-friend/browse/friend-browse.component\";\ndeclare let $: any;\n\n@Component({\n    templateUrl: './social-friend.component.html',\n    styleUrls: ['./social-friend.component.css']\n})\nexport class SocialFriendComponent implements OnInit {\n\n    @ViewChild('tabViewContainer', {read: ViewContainerRef}) _tabViewContainer;\n    @ViewChild('searchEl') searchEl;\n\n    tabs: NavigationData[] = [\n        {\n            name: 'Trang ch',\n            component: '',\n            path: ''\n        },\n        {\n            name: 'Bn b',\n            component: SocialGroupComponent,\n            path: '/friend'\n        },\n        {\n            name: 'Li mi',\n            component: FriendInvitationComponent,\n            path: '/friend/invitation'\n        },\n        {\n            name: 'Tm bn',\n            component: FriendBrowseComponent,\n            path: '/friend/browse'\n        }\n    ];\n\n    searchValue: string = '';\n    search = new FormControl();\n    placeholder: string;\n\n    prefix: string;\n\n    private _activeComponent;\n    private _searchEl;\n    private _searchable: boolean;\n\n    constructor(private router: Router) {\n        this.prefix = this.router.url.substring(0, this.router.url.indexOf('/friend'));\n    }\n\n    ngOnInit() {\n        this._searchEl = $(this.searchEl.nativeElement);\n        this.search.valueChanges.subscribe((value) => {\n            if (this._searchable) {\n                this._activeComponent.instance.onSearch(value.trim());\n            }\n        });\n    }\n\n    changeTab(data: NavigationData) {\n        this.searchValue = '';\n    }\n\n    loadTabComponent(componentRef: ComponentRef<any>) {\n        this._activeComponent = componentRef;\n        this._searchable = componentRef.instance.onSearch;\n        this.placeholder = componentRef.instance.placeholder || 'Tm kim...';\n        if (this._searchable) {\n            this._searchEl.show();\n            componentRef.instance.clearSearchValue = () => {\n                this.searchValue = '';\n            };\n        } else {\n            this._searchEl.hide();\n        }\n    }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'social-right-layout',\n  templateUrl: './social-right-layout.component.html',\n  styleUrls: ['./social-right-layout.component.css']\n})\nexport class SocialRightLayoutComponent {\n\n}\n","import {NgModule} from '@angular/core';\nimport {SocialRoutingModule} from \"./social-routing.module\";\nimport {SocialHomeComponent} from './home/social-home.component';\nimport {SocialFriendComponent} from \"./friend/social-friend.component\";\nimport {SocialActivityViewComponent} from \"./activity-view/social-activity-view.component\";\nimport {SocialRightLayoutComponent} from \"./right-layout/social-right-layout.component\";\nimport {SocialModule} from \"../social.module\";\nimport {NavigationTabModule} from \"inet-ui\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\n\n@NgModule({\n    imports: [\n        FormsModule,\n        ReactiveFormsModule,\n        SocialModule,\n        SocialRoutingModule,\n        NavigationTabModule\n    ],\n    declarations: [\n        SocialHomeComponent,\n        SocialFriendComponent,\n        SocialActivityViewComponent,\n        SocialRightLayoutComponent\n    ]\n})\nexport class SocialAppModule { }\n"]}