{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://inet-core/src/loading-indicator.service.ts","ng://inet-core/src/http-url-encoding-codec.ts","ng://inet-core/src/http-client.service.ts","ng://inet-core/src/core.service.ts","ng://inet-core/src/suggestion.service.ts","ng://inet-core/src/infinite-scroller.directive.ts","ng://inet-core/src/new-password.ts","ng://inet-core/src/notification.service.ts","ng://inet-core/src/paging.ts","ng://inet-core/src/notify-params.ts","ng://inet-core/src/response-data.ts","ng://inet-core/src/security.service.ts","ng://inet-core/src/role-access.directive.ts","ng://inet-core/src/ssourl.pipe.ts","ng://inet-core/src/user-profile.service.ts","ng://inet-core/src/user-profile.ts","ng://inet-core/src/user-response-data.ts","ng://inet-core/src/accent.service.ts","ng://inet-core/src/cache-storage.service.ts","ng://inet-core/src/autosize.directive.ts","ng://inet-core/src/avatar.directive.ts","ng://inet-core/src/resource-loader.service.ts","ng://inet-core/src/init-app.ts","ng://inet-core/src/core.module.ts","ng://inet-core/src/websocket/websocket-abstract.ts","ng://inet-core/src/websocket/websocket-jboss.ts","ng://inet-core/src/websocket/websocket-vertx.ts","ng://inet-core/src/websocket/websocket-client.ts","ng://inet-core/src/websocket/websocket-client.service.ts","ng://inet-core/src/utils/HtmlUtils.ts","ng://inet-core/src/error-message.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","LoadingIndicatorService","elementId","instance","setElementId","getElementId","getIndicator","loadingIndicator","container","loadingElement","message","document","getElementById","elements","getElementsByTagName","length","innerText","LoadingIndicator","getLoadingIndicator","_this","Promise","resolve","reject","setTimeout","showLoading","then","element","title","style","display","hideLoading","complete","ngOnDestroy","Injectable","el","msg","HttpUrlEncodingCodec","encodeKey","k","standardEncoding","encodeValue","v","decodeKey","decodeURIComponent","decodeValue","encodeURIComponent","HttpClientService","handler","loadingService","_super","call","headers","HttpHeaders","Content-Type","tslib_1.__extends","convertToHttpParams","obj","getOwnPropertyNames","reduce","key","set","undefined","HttpParams","encoder","getJSON","url","body","get","params","postJSON","post","putJSON","put","deleteJSON","delete","convertToFormData","formData","FormData","keys","forEach","append","downloadFile","form","createElement","method","action","enctype","input","name","value","type","appendChild","submit","removeChild","HttpHandler","HttpClient","CoreService","http","logout","iNet","getPUrl","username","subscribe","data","iFrame","setAttribute","uuid","addEventListener","location","reload","err","getAvatar","usercode","thumbnail","isExternalUser","externalUser","isCommunity","firmPrefix","getOrg","pipe","map","res","searchOrgan","getSystemApplication","applications","of","$appCache","tap","shareReplay","searchFirmAccount","callback","updateLanguage","lang","intl","getImageUrl","fileName","indexOf","getAssetsPath","getFileUrl","getFileServerPath","getSsoRedirect","$","param","convergePlugins","convergeSearch","converge","setEnvironment","production","environment","getEnvironment","getPath","path","lastIndex","lastIndexOf","substring","fileServer","imgFolder","SuggestionService","saveSuggestion","keyword","loadSuggestion","items","DEFAULT_SCROLL_POSITION","sH","sT","cH","InfiniteScrollerDirective","elm","scrollPercent","isSubmit","isUserScrollingDown","positions","isScrollExpectedPercent","position","ngAfterViewInit","registerScrollEvent","streamScrollEvents","requestCallbackOnScroll","scrollEvent$","fromEvent","nativeElement","userScrolledDown$","e","target","scrollHeight","scrollTop","clientHeight","pairwise","filter","requestOnScroll$","immediateCallback","startWith","exhaustMap","scrollCallback","console","log","isScrollSubmit","Directive","args","selector","ElementRef","Input","NewPassword","NotificationService","showMessage","config","Paging","NotifyParams","pageNumber","pageSize","notifylist","ErrorResponse","ResponseData","ResponseElementsData","SecurityService","roles","parserRoleFrom","permission","load","window","isEmpty","prefix","enableLayout","push","uniqueArray","arrArg","elem","pos","arr","concat","hasRole","split","role","ping","iframe","onload","__path","contentWindow","pathname","match","ex","RoleAccessDirective","templateRef","viewContainer","securityService","ngOnInit","applyPermission","roleAccess","createEmbeddedView","clear","TemplateRef","ViewContainerRef","SSOUrlPipe","transform","getSSOUrl","Pipe","UserProfileService","coreService","profile","systemProfile","$profileObservableCache","inventory","view","update","change_password","photo","loadSystemProfile","do","getSystemProfile","Observable","$systemProfileCache","getProfile","user","$cache","changePassword","password","getAvatarUrlByProfile","userProfile","avatarUrl","avatar","getAvatarVersion","getAvatarUrl","getFullName","fullName","lastName","middleName","firstName","displayName","trim","getSignPictureId","signPictureId","signPictureID","getSignVerifyNumber","signVerify","increaseAvatarVersion","localStorage","setItem","toString","Number","getItem","getProfileByUsername","getAvatarUrlByUsername","getDefaultAvatarUrl","DEFAULT_AVATAR_URL","UserProfile","UserResponseData","AccentService","_vi_accents","_en_accents","viToEn","str","replace","a","index","CacheStorageService","timeCache","__storage","__queue","promiseQueue","promise","resovle","resolveQueue","context","fn","apply","getData","Date","getTime","time","setData","options","removeData","clearData","AutoSizeDirective","_clientWidth","clientWidth","defineProperty","_minHeight","val","updateMinHeight","_maxHeight","updateMaxHeight","onResize","adjust","onInput","getComputedStyle","resize","overflow","height","minHeight","maxHeight","exportAs","HostListener","AvatarDirective","_el","_loadAvatarError","bind","_setAvatar","ngOnChanges","src","getUrl","ResourceLoaderService","_loaded","_version","resources","_loadResources","loadJS","_loadWithTagName","getFullUrlJS","loadCSS","rel","href","startsWith","substr","isLoaded","splitGroups","_groupResources","_loadGroups","splice","groups","i","sync","promises","item","_load","all","resource","tagName","properties","tagEl","onerror","warn","head","_initScriptVersion","$script","initApp","CoreModule","NgModule","imports","CommonModule","HttpClientModule","declarations","exports","providers","provide","APP_INITIALIZER","useFactory","multi","deps","WebSocketAbstract","onMessage","Subject","onStateChange","connect","stateChange","next","readyState","SEND","PUBLISH","WebSocketType","EnvelopBody","EnvelopMessage","sender","content","joins","duration","alert","WebSocketJboss","_socket","WebSocket","OPEN","_ping","onmessage","event","envelopBody","JSON","parse","onopen","onclose","close","send","envelop","stringify","WebSocketVertx","_eventbus","state","keyapi","_connect","EventBus","transports","registerHandler","publish","address","WebSocketClient","sendTimeout","_autoconnectAfter","_autoconnectRepeat","_autoconnectRetryAfter","_envelopQueue","_getAccountInfo","_register","socket","CONNECTING","CLOSING","CLOSED","_autoconnect","application","sendEnvelop","buildEnvelop","connected","f","timer","_completeEnvelopQueue","join","WebSocketEnvelop","_username","alias","_sendEnvelopQueue","status","ajax","success","_stateChange","error","Error","closed","autoconnect","_runAutoConnect","_cancelAutoConnect","_autoconectTimer","_autoconectCount","clearTimeout","WebSocketClientService","HtmlUtils","formatHtmlDisplay","html","formatPattern","RegExp","CLIENT","SERVER","TYPE"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {Injectable, OnDestroy} from '@angular/core';\n@Injectable()\nexport class LoadingIndicatorService implements OnDestroy {\n    static instance: LoadingIndicatorService = null;  // Create a singleton service\n    elementId: string =  'loading-indicator';\n    private static loadingIndicator: LoadingIndicator = null;\n\n    constructor() {\n        return LoadingIndicatorService.instance = LoadingIndicatorService.instance || this;\n    }\n    setElementId(elementId: string){\n        this.elementId = elementId;\n    }\n\n    getElementId (): string {\n        return this.elementId;\n    }\n\n    /**\n     * Get DOM of loading indicator\n     */\n    private getIndicator(): LoadingIndicator {\n        if (LoadingIndicatorService.loadingIndicator && LoadingIndicatorService.loadingIndicator.container) {\n            return LoadingIndicatorService.loadingIndicator;\n        }\n        // If Loading indicator not exist\n        const container = document.getElementById(this.getElementId()) as HTMLElement;\n        let loadingElement: HTMLElement;\n        let message: string;\n        if (container) {\n            const elements = container.getElementsByTagName('span');\n            if (elements && elements.length > 0) {\n                loadingElement = container.getElementsByTagName('span')[0] as HTMLElement;\n                if (loadingElement && loadingElement.innerText) {\n                    message = loadingElement.innerText;\n                }\n            }\n        }\n        // cache Loading indicator\n        LoadingIndicatorService.loadingIndicator = new LoadingIndicator(container, loadingElement, message);\n        return LoadingIndicatorService.loadingIndicator;\n    }\n\n    private getLoadingIndicator(): Promise<LoadingIndicator> {\n        return new Promise((resolve, reject) => {\n            setTimeout(() => resolve(this.getIndicator()));\n        });\n    }\n\n    showLoading(message?: string) {\n        this.getLoadingIndicator().then(loadingIndicator => {\n            if (loadingIndicator && loadingIndicator.container) {\n                if (loadingIndicator.element) {\n                    loadingIndicator.element.innerText = message || loadingIndicator.message || loadingIndicator.container.title;\n                }\n                loadingIndicator.container.style.display = 'block';\n            }\n        });\n    }\n\n    hideLoading() {\n        this.getLoadingIndicator().then(loadingIndicator => {\n            if(loadingIndicator && loadingIndicator.container) {\n                loadingIndicator.container.style.display = 'none';\n            }\n        });\n    }\n\n    complete() {\n        this.hideLoading();\n    }\n\n    ngOnDestroy() {\n        this.complete();\n    }\n}\n\nexport class LoadingIndicator {\n    container: HTMLElement;\n    element: HTMLElement;\n    message: string;\n\n    constructor(container: HTMLElement, el: HTMLElement, msg: string = '') {\n        this.container = container;\n        this.element = el;\n        this.message = msg;\n    }\n}\n","/**\n * Copyright (c) 2019 by Vy Nguyen (ntvy@inetcloud.vn)\n *\n * Created by ntvy on 14:21 28/02/2019\n *\n */\nimport {HttpParameterCodec} from \"@angular/common/http\";\nexport class HttpUrlEncodingCodec implements HttpParameterCodec {\n    encodeKey(k: string): string { return standardEncoding(k); }\n    encodeValue(v: string): string { return standardEncoding(v); }\n    decodeKey(k: string): string { return decodeURIComponent(k); }\n    decodeValue(v: string) { return decodeURIComponent(v); }\n}\nfunction standardEncoding(v: string): string {\n    return encodeURIComponent(v);\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient, HttpHandler, HttpHeaders, HttpParams} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {LoadingIndicatorService} from \"./loading-indicator.service\";\nimport {HttpUrlEncodingCodec} from \"./http-url-encoding-codec\";\n\n@Injectable()\nexport class HttpClientService extends HttpClient {\n    private headers = new HttpHeaders({'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'});\n\n    constructor(handler: HttpHandler, private loadingService: LoadingIndicatorService) {\n        super(handler);\n    }\n\n    convertToHttpParams(obj: any): HttpParams {\n        if (!obj) {\n            return null;\n        }\n        return Object.getOwnPropertyNames(obj).reduce((p, key) => p.set(key, obj[key] == undefined ? '' : obj[key]), new HttpParams({ encoder: new HttpUrlEncodingCodec()}));\n    }\n\n    getJSON(url: string, body?: any | null): Observable<any> {\n        return this.get(url, {params: this.convertToHttpParams(body), headers: this.headers});\n    }\n\n    postJSON(url: string, body?: any | null): Observable<any> {\n        return this.post(url, this.convertToHttpParams(body), {headers: this.headers});\n    }\n\n    putJSON(url: string, body?: any | null): Observable<any> {\n        return this.put(url, this.convertToHttpParams(body), {headers: this.headers});\n    }\n\n    deleteJSON(url: string, body?: any | null): Observable<any> {\n        return this.delete(url, {params: this.convertToHttpParams(body), headers: this.headers});\n    }\n\n    convertToFormData(obj: any): FormData {\n        //console.log('[convertToFormData]', obj);\n        let formData = new FormData();\n        if (!obj) {\n            return formData;\n        }\n        Object.keys(obj).forEach(k => {\n            //console.log('[key]', k , '=', obj[k]==undefined ? '' : obj[k]);\n            formData.append(k, obj[k] == undefined ? '' : obj[k]);\n        });\n        //console.log('[formData]', formData);\n        return formData;\n    }\n\n    downloadFile(url: string, obj?: any) {\n        if (!obj) {\n            return;\n        }\n        let form = document.createElement('form');\n        form.method = 'POST';\n        form.action = url;\n        form.enctype = 'multipart/form-data';\n\n        Object.keys(obj).forEach(k => {\n            //console.log('[key]', k , '=', obj[k]==undefined ? '' : obj[k]);\n            let input = document.createElement(\"input\");\n            input.name = k;\n            input.value = obj[k] == undefined ? '' : obj[k];\n            input.type = 'hidden';\n            form.appendChild(input);\n        });\n        document.body.appendChild(form);\n        form.submit();\n        document.body.removeChild(form);\n    }\n\n    showLoading(message?: string) {\n        this.loadingService.showLoading(message);\n    }\n\n    hideLoading() {\n        this.loadingService.hideLoading()\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpErrorResponse} from '@angular/common/http';\nimport {Observable, of} from 'rxjs';\nimport {HttpClientService} from './http-client.service';\nimport {map, shareReplay, tap} from 'rxjs/operators';\n\ndeclare let iNet: any;\ndeclare let $: any;\n\n@Injectable()\nexport class CoreService {\n    static instance: CoreService = null;  // Create a singleton service\n    private static environment = {production: false};\n    private $appCache: Observable<Object>;\n    private applications: Array<any>;\n\n    constructor(private http: HttpClientService) {\n        return CoreService.instance = CoreService.instance || this;\n    }\n\n    logout() {\n        this.http.post(iNet.getPUrl('system/logout'), {'username': iNet.username}).subscribe(\n            (data: LogoutData) => {\n                const iFrame = document.createElement('iframe');\n                iFrame.setAttribute('src', data.uuid);\n                iFrame.addEventListener('load', function () {\n                    location.reload();\n                });\n                document.body.appendChild(iFrame);\n            }, (err: HttpErrorResponse) => {\n            }\n        );\n    }\n\n    /*\n    * Gets the avatar URL with the username\n    * @deprecated Use UserProfileService.getAvatarUrlByUsername() instead\n    */\n    getAvatar(usercode: string, thumbnail?: number): string {\n        thumbnail = thumbnail || 50;\n        return iNet.getPUrl('system/userprofile/photo') +\n            `?usercode=${usercode}&thumbnail=${thumbnail}`;\n    }\n\n    isExternalUser(): boolean {\n        return (iNet.externalUser == 'true');\n    }\n\n    isCommunity(): boolean {\n        return (this.isExternalUser() || iNet.firmPrefix == 'smartcloud' || iNet.firmPrefix == 'community');\n    }\n\n    getOrg(): Observable<Object> {\n        return this.http.get(iNet.getPUrl('plugin/organization/list'))\n            .pipe(map((res: CustomResponse) => res.elements));\n    }\n\n    searchOrgan(params: any = {}): Observable<Object> {\n        return this.http.postJSON(iNet.getPUrl('plugin/organization/search'), params)\n            .pipe(map((res: CustomResponse) => res.elements));\n    }\n\n    getSystemApplication(): Observable<Object> {\n        if (this.applications) {\n            return of(this.applications);\n        }\n        if (!this.$appCache) {\n            this.$appCache = this.http.postJSON(iNet.getPUrl('system/application/list'))\n                .pipe(tap((res: CustomResponse) => this.applications = res.elements))\n                .pipe(map((res: CustomResponse) => res.elements))\n                .pipe(shareReplay(1));\n        }\n        return this.$appCache;\n    }\n\n    searchFirmAccount(params, callback: Function) {\n        this.http.postJSON(iNet.getPUrl('plugin/firmaccount/list'), params).subscribe(\n            (data) => {\n                callback(data);\n            },\n            (err) => {\n                callback(null, err);\n            }\n        );\n    }\n\n    updateLanguage(lang: string, callback?: Function) {\n        this.http.postJSON(iNet.getPUrl('system/userprofile/languageupdate'), {intl: lang}).subscribe(\n            (data) => {\n                if (callback) {\n                    callback(lang);\n                }\n            }, (err) => {\n                if (callback) {\n                    callback(lang);\n                }\n            }\n        );\n    }\n\n    /**\n     * Get the Image URL for the current app\n     * @param fileName - the file name\n     */\n    getImageUrl(fileName: string): string {\n        if (!fileName) {\n            return '';\n        }\n        if (fileName.indexOf('/') === 0) {\n            return this.getAssetsPath() + fileName;\n        }\n        return `${this.getAssetsPath()}/${fileName}`;\n    }\n\n    /**\n     * Build the file URL for the file server request\n     * @param fileName - the given file name\n     */\n    getFileUrl(fileName: string): string {\n        if (!fileName) {\n            return '';\n        }\n        if (fileName.indexOf('/') === 0) {\n            return this.getFileServerPath() + fileName;\n        }\n        return `${this.getFileServerPath()}/${fileName}`;\n    }\n\n    getSsoRedirect(data: SsoRedirectData): string {\n        return iNet.getPUrl('ssorequest/redirect') + '?' + $.param(data);\n    }\n\n    convergePlugins(): Observable<any> {\n        return this.convergeSearch({converge: 'plugins'});\n    }\n\n    convergeSearch(params): Observable<any> {\n        return this.http.postJSON(iNet.getPUrl('converge/search'), params);\n    }\n\n    setEnvironment(v: any = {production: false}) {\n        CoreService.environment = v;\n    }\n\n    getEnvironment(): any {\n        return CoreService.environment;\n    }\n\n    private getPath(path: string = ''): string {\n        const lastIndex = path.lastIndexOf('/');\n        if (lastIndex === path.length - 1) {\n            return path.substring(0, lastIndex);\n        }\n        return path;\n    }\n\n    /**\n     * Gets File server path\n     */\n    getFileServerPath(): string {\n        return this.getPath(iNet.fileServer);\n    }\n\n    /**\n     * Gets assets path of current app\n     */\n    getAssetsPath(): string {\n        return this.getPath(iNet.imgFolder);\n    }\n}\n\nexport interface LogoutData {\n    uuid: string;\n}\n\ninterface CustomResponse extends Response {\n    elements: any[];\n}\n\nexport interface SsoRedirectData {\n    url: string;\n    application: string;\n    redirect?: boolean;\n}\n\nexport interface PathRedirectData {\n    path: string;\n    application: string;\n    organId?: string;\n    firmPrefix?: string;\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClientService} from './http-client.service';\nimport {Subscription} from 'rxjs';\n\ndeclare let iNet: any;\n\n@Injectable()\nexport class SuggestionService {\n    static instance: SuggestionService = null;  // Create a singleton service\n\n    constructor(private http: HttpClientService) {\n        return SuggestionService.instance = SuggestionService.instance || this;\n    }\n\n    saveSuggestion(params: SuggestionParamData, callback?: Function): Subscription {\n        if (!params.keyword) {\n            return;\n        }\n        return this.http.postJSON(iNet.getPUrl('system/suggestion/update'), params).subscribe(\n            (data) => {\n                if (callback) {\n                    callback(data);\n                }\n            },\n            (err) => {\n                if (callback) {\n                    callback(null, err);\n                }\n            }\n        );\n    }\n\n    loadSuggestion(params: SuggestionParamData, callback: Function): Subscription {\n        return this.http.postJSON(iNet.getPUrl('system/suggestion/hint'), params).subscribe(\n            (data: SuggestionResponse) => {\n                callback(data && data.items || []);\n            },\n            err => {\n                callback([], err);\n            }\n        );\n    }\n}\nexport interface SuggestionParamData {\n    content: string;\n    keyword: string;\n}\n\nexport interface SuggestionResponse {\n    items: SuggestionItem[];\n    total: number;\n}\n\nexport interface SuggestionItem {\n    content: string;\n    keyword: string;\n    ownercode: string;\n    usage: number;\n    uuid: string;\n}\n","import { Directive, AfterViewInit, ElementRef, Input } from '@angular/core';\nimport {fromEvent} from \"rxjs\";\n\ninterface ScrollPosition {\n  sH: number;\n  sT: number;\n  cH: number;\n}\n\nconst DEFAULT_SCROLL_POSITION: ScrollPosition = {\n  sH: 0,\n  sT: 0,\n  cH: 0\n};\n\n@Directive({\n  selector: '[appInfiniteScroller]'\n})\nexport class InfiniteScrollerDirective implements AfterViewInit {\n\n  private scrollEvent$;\n  private userScrolledDown$;\n  private requestOnScroll$;\n\n  @Input()\n  scrollCallback;\n\n  @Input()\n  immediateCallback;\n\n  @Input()\n  scrollPercent = 70;\n\n  @Input()\n  isSubmit = false;\n\n  constructor(private elm: ElementRef) { }\n\n  ngAfterViewInit() {\n    this.registerScrollEvent();\n    this.streamScrollEvents();\n    this.requestCallbackOnScroll();\n\n  }\n\n  private registerScrollEvent() {\n\n    this.scrollEvent$ = fromEvent(this.elm.nativeElement, 'scroll');\n\n  }\n\n  private streamScrollEvents() {\n    this.userScrolledDown$ = this.scrollEvent$\n      .map((e: any): ScrollPosition => ({\n        sH: e.target.scrollHeight,\n        sT: e.target.scrollTop,\n        cH: e.target.clientHeight\n      }))\n      .pairwise()\n      .filter(positions => this.isUserScrollingDown(positions) && this.isScrollExpectedPercent(positions[1]))\n  }\n\n  private requestCallbackOnScroll() {\n    this.requestOnScroll$ = this.userScrolledDown$;\n\n    if (this.immediateCallback) {\n      this.requestOnScroll$ = this.requestOnScroll$\n        .startWith([DEFAULT_SCROLL_POSITION, DEFAULT_SCROLL_POSITION]);\n    }\n\n    this.requestOnScroll$\n      .exhaustMap(() => {\n        return this.scrollCallback();\n      })\n      .subscribe((data) => { console.log(data) }, (err) => console.log(err));\n\n  }\n\n  private isUserScrollingDown = (positions) => {\n    return positions[0].sT < positions[1].sT;\n  };\n\n  private isScrollExpectedPercent = (position) => {\n    return ((position.sT + position.cH) / position.sH) > (this.scrollPercent / 100);\n  };\n\n  private isScrollSubmit() {\n    return this.isSubmit;\n  };\n\n}\n","export class NewPassword {\n  oldpass: string;\n  newpass: string;\n  confirmpass: string;\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class NotificationService {\n\n  constructor() { }\n\n  showMessage(msg: string, type?:string, title?: string, config?: any){\n\n  }\n}\n","export class Paging {\n  pageSize: number;\n  pageNumber: number;\n}","import {Paging} from './paging';\n\nexport class NotifyParams extends Paging{\n  notifylist: boolean;\n\n  constructor(\n    pageNumber: number,\n    pageSize: number,\n    notifylist: boolean\n  ) {\n    super();\n    this.pageNumber = pageNumber;\n    this.pageSize = pageSize;\n    this.notifylist= notifylist;\n  };\n}\n","export interface WebResponse {\n\n}\n\nexport class ErrorResponse {\n  errors: any[];\n  type: string;\n}\n\nexport class ResponseData extends ErrorResponse implements WebResponse {\n  total: number;\n  items: any[];\n}\n\nexport class ResponseElementsData extends ErrorResponse implements WebResponse {\n  elements: any[];\n}","import {Injectable} from '@angular/core';\nimport {HttpClientService} from \"./http-client.service\";\nimport {HttpErrorResponse} from \"@angular/common/http\";\n\ndeclare let iNet: any;\n\n@Injectable()\nexport class SecurityService {\n    static instance: SecurityService = null;\n    private roles: Array<string> = [];\n\n    constructor(private http: HttpClientService) {\n        if (!SecurityService.instance) {\n            this.roles = this.parserRoleFrom(iNet.permission || {});\n        }\n        return SecurityService.instance = SecurityService.instance || this;\n    }\n\n    public load(): Promise<any> {\n        return new Promise(resolve => {\n            if(!window['iNet'] || iNet.isEmpty(iNet.prefix) || !iNet.enableLayout) {\n                resolve();\n            } else {\n                this.http.postJSON(iNet.getPUrl('system/userrole/list'))\n                    .subscribe((obj: any) => {\n                        for (let key in obj) {\n                            this.append(obj[key]);\n                        }\n                        resolve(obj);\n                    }, (err: HttpErrorResponse) => {\n                        resolve();\n                    });\n            }\n        });\n    }\n\n    private parserRoleFrom(obj: Object): Array<string> {\n        let roles: Array<string> = [];\n        for (let key in obj) {\n            if (obj[key] === \"true\" || obj[key] === true) {\n                roles.push(key);\n            }\n        }\n        return roles;\n    }\n\n    private uniqueArray(arrArg) {\n        return arrArg.filter(function(elem, pos,arr) {\n            return arr.indexOf(elem) == pos;\n        });\n    };\n\n    private append(v: Array<string>): Array<string> {\n        //console.log('[append]roles', v);\n        this.roles = this.uniqueArray(this.roles.concat(v));\n        return this.roles;\n    }\n\n    hasRole(v: string): boolean {\n        //console.log('[checkRole]=', v);\n        let roles = v.split(',');\n        if (roles.length > 1) {\n            let __items = roles.filter(role => this.roles.indexOf(role) > -1);\n            return (__items.length > 0);\n        }\n        return (this.roles.indexOf(v) > -1);\n    }\n\n    /**\n     * Check session timeout when system is idle\n     */\n    ping() {\n        if(iNet.isEmpty(iNet.username) || !iNet.enableLayout) {\n            return;\n        }\n        let iframe = document.createElement('iframe');\n        iframe.style.display = \"none\";\n        iframe.setAttribute(\"src\", iNet.getPUrl('common/page/ping'));\n        iframe.onload = function () {\n            const __loginUrl = 'cas/login';\n            try {\n                let __path = iframe.contentWindow.location.pathname || '';\n                let __isLogin = (__loginUrl.match(__path) || []).length > 0;\n                if (__isLogin) {\n                    window.location.reload();\n                }\n            } catch (ex) {\n                window.location.reload();\n            }\n            document.body.removeChild(iframe);\n        };\n        document.body.appendChild(iframe);\n    }\n\n}\n","import {Directive, Input, OnInit, TemplateRef, ViewContainerRef} from '@angular/core';\nimport {SecurityService} from './security.service';\n\n@Directive({\n  selector: '[roleAccess]'\n})\nexport class RoleAccessDirective implements OnInit {\n\n  @Input('roleAccess') roleAccess: string;\n\n  constructor(private templateRef: TemplateRef<any>,\n              private viewContainer: ViewContainerRef,\n              private securityService: SecurityService) {\n  }\n\n  ngOnInit(): void {\n    this.applyPermission();\n  }\n\n  private applyPermission(): void {\n    if(this.securityService.hasRole(this.roleAccess)){\n      this.viewContainer.createEmbeddedView(this.templateRef);\n    } else {\n      this.viewContainer.clear();\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\ndeclare let iNet: any;\n@Pipe({\n  name: 'ssoUrl'\n})\nexport class SSOUrlPipe implements PipeTransform {\n\n  transform(url: string): string {\n    return iNet.getSSOUrl(url);\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {UserProfile} from './user-profile';\nimport {HttpClientService} from './http-client.service';\nimport {Observable} from 'rxjs';\nimport {UserResponseData} from \"./user-response-data\";\nimport {NewPassword} from \"./new-password\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/operator/do';\nimport {shareReplay} from 'rxjs/operators';\nimport {HttpErrorResponse} from \"@angular/common/http\";\nimport {CoreService} from \"./core.service\";\n\ndeclare let iNet: any;\nconst AVATAR_VERSION_KEY =  'avatarVersion';\n@Injectable()\nexport class UserProfileService {\n    static instance: UserProfileService = null;\n    static readonly DEFAULT_AVATAR_URL = 'data:image/jpeg;base64,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';\n    private $cache: Observable<Object>;\n    private profile: UserProfile = null;\n\n    private $systemProfileCache: Observable<Object>;\n    private systemProfile: UserResponseData = null;\n\n    private $profileObservableCache: any = {};\n    private inventory: any = {};\n\n    private url = {\n        get: iNet.getPUrl('gl/contact/load'),\n        view: iNet.getPUrl('system/userprofile/view'),\n        update: iNet.getPUrl('system/userprofile/update'),\n        change_password: iNet.getPUrl('system/account/passsword'),\n        photo: iNet.getPUrl('system/userprofile/photo')\n    };\n\n    constructor(private http: HttpClientService, private coreService: CoreService) {\n        return UserProfileService.instance = UserProfileService.instance || this;\n    }\n\n    /*\n    private loadProfile(): Observable<Object> {\n        return this.http.postJSON(this.url.get)\n            .map((res: UserProfile) => res)\n            .do(profile => this.profile = profile);\n    }\n     */\n\n    private loadSystemProfile(): Observable<Object> {\n        return this.http.postJSON(this.url.view)\n            .map((res: UserResponseData) => res)\n            .do(profile => {\n                this.systemProfile = profile;\n                this.profile = profile.user as UserProfile;\n            });\n    }\n\n    /**\n     * Gets the currently LDAP profile of user logged\n     */\n    getSystemProfile(): Observable<Object> {\n        if (this.systemProfile) {\n            return Observable.of(this.systemProfile);\n        }\n        if (!this.$systemProfileCache) {\n            this.$systemProfileCache = this.loadSystemProfile().pipe(shareReplay(1));\n        }\n        return this.$systemProfileCache;\n    }\n\n    /**\n     * Gets the currently profile of user logged\n     */\n    getProfile(): Observable<Object> {\n        if (this.profile) {\n            return Observable.of(this.profile);\n        }\n        /*\n        if (!this.$cache) {\n            this.$cache = this.loadProfile().pipe(shareReplay(1));\n        }\n        return this.$cache;\n         */\n        return this.getSystemProfile().map((res: UserResponseData) => res.user);\n    }\n\n    update(user: UserProfile): Observable<Object> {\n        this.$cache=null;\n        return this.http.postJSON(this.url.update, user);\n    }\n\n    changePassword(password: NewPassword): Observable<Object> {\n        return this.http.postJSON(this.url.change_password, password);\n    }\n\n    getAvatarUrlByProfile(userProfile: UserProfile): string {\n        let avatarUrl: string;\n        avatarUrl = this.coreService.getFileUrl(userProfile.avatar);\n        if (this.getAvatarVersion() > 0) {\n            avatarUrl = `${avatarUrl}?version=${this.getAvatarVersion()}`;\n        }\n        return avatarUrl;\n    }\n\n    getAvatarUrl(): Promise<string> {\n        return new Promise(resolve => {\n            resolve(this.url.photo);\n            /*\n            this.getProfile().subscribe((obj: UserProfile) => {\n                // resolve(this.getAvatarUrlByProfile(obj));\n            }, (err: HttpErrorResponse) => {\n                resolve();\n            });\n\n             */\n        });\n    }\n\n    getFullName(): Promise<string> {\n        return new Promise(resolve => {\n            if(!window['iNet'] || iNet.isEmpty(iNet.prefix) || !iNet.enableLayout) {\n                resolve(window['iNet'] ? iNet.displayName: '');\n            } else {\n                this.getProfile().subscribe((profile: UserProfile) => {\n                    let fullName: string = '';\n                    if (profile.lastName) {\n                        fullName += profile.lastName;\n                    }\n                    if (profile.middleName) {\n                        fullName += ' ' + profile.middleName;\n                    }\n                    if (profile.firstName) {\n                        fullName += ' ' + profile.firstName;\n                    }\n                    profile.name = fullName || iNet.displayName || iNet.username;\n                    resolve(profile.name.trim());\n                }, (err: HttpErrorResponse) => {\n                    resolve();\n                });\n            }\n        });\n    }\n\n    getSignPictureId(): Promise<string> {\n        return new Promise(resolve => {\n            this.getSystemProfile().subscribe((data: UserResponseData) => {\n                let signPictureId: string = '';\n                if(data.user && data.user.signPictureID) {\n                    signPictureId = data.user.signPictureID;\n                }\n                resolve(signPictureId);\n            }, (err: HttpErrorResponse) => {\n                resolve();\n            });\n        });\n    }\n\n    getSignVerifyNumber(): Promise<string> {\n        return new Promise(resolve => {\n            this.getSystemProfile().subscribe((data: UserResponseData) => {\n                let signVerify: string = '';\n                if(data.user && data.user.signVerify) {\n                    signVerify = data.user.signVerify;\n                }\n                resolve(signVerify);\n            }, (err: HttpErrorResponse) => {\n                resolve();\n            });\n        });\n    }\n\n    increaseAvatarVersion() {\n        localStorage.setItem(AVATAR_VERSION_KEY, (this.getAvatarVersion() + 1).toString());\n    }\n\n    getAvatarVersion(): number {\n        return Number(localStorage.getItem(AVATAR_VERSION_KEY));\n    }\n    /**\n     * Returns the profile associated with the username.\n     * @param username - {string} The username variable\n     */\n    getProfileByUsername(username: string): Observable<any> {\n        //console.log('[getProfileByUsername]--username, inventory', username, this.inventory);\n        if (this.inventory.hasOwnProperty(username)) {\n            return Observable.of(this.inventory[username]);\n        }\n        if (!this.$profileObservableCache[username]) {\n            this.$profileObservableCache[username] = this.http.getJSON(this.url.get, {username: username})\n                .do((res) => this.inventory[username]= res)\n                .pipe(shareReplay(1));\n        }\n        return this.$profileObservableCache[username];\n    }\n\n    /**\n     * Returns the avatar URL  with the username.\n     * @param username - {string} The username variable\n     */\n    getAvatarUrlByUsername(username: string): Promise<string> {\n        return new Promise(resolve => {\n            this.getProfileByUsername(username).subscribe((obj: UserProfile) => {\n                if(obj.avatar) {\n                    resolve(this.coreService.getFileUrl(obj.avatar));\n                } else {\n                    resolve();\n                }\n            }, (err: HttpErrorResponse) => {\n                resolve();\n            });\n        });\n    }\n\n    getDefaultAvatarUrl(): string {\n        return UserProfileService.DEFAULT_AVATAR_URL;\n    }\n}\n","export class UserProfile {\n    uuid: string;\n    code: string;\n    usercode: string;\n    username: string;\n    password: string;\n    fname: string;\n    mname: string;\n    lname: string;\n    firstName: string;\n    lastName: string;\n    middleName: string;\n    name: string; //Middle name and Last name together.\n    email: string;\n    mobile: string;\n    phone: string;\n    birthday: number;\n    address: string;\n    state: string;\n    city: string;\n    country: string;\n    timezone: string;\n    postalCode: string;\n    language: string;\n    department: string;\n    position: string;\n    emailToAccount: boolean;\n    signPictureID: string;\n    signVerify: string;\n    secureTicket: string;\n    attributes: any;\n    avatar: string;\n}\n","import {UserProfile} from \"./user-profile\";\nimport {UserAttribute} from \"./user-attribute\";\nexport class UserResponseData {\n  user: UserProfile;\n  attributes: UserAttribute[];\n  glcontactprofileload: UserProfile;\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class AccentService {\n\n  private _vi_accents = [\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\",\"\",\"\",\n    \"\"\n  ];\n\n  private _en_accents = [\n    \"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\n    \"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\n    \"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\"e\",\n    \"i\",\"i\",\"i\",\"i\",\"i\",\n    \"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\n    \"o\",\"o\",\"o\",\"o\",\"o\",\n    \"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\"u\",\n    \"y\",\"y\",\"y\",\"y\",\"y\",\n    \"d\",\n    \"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\n    \"A\",\"A\",\"A\",\"A\",\"A\",\n    \"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\"E\",\n    \"I\",\"I\",\"I\",\"I\",\"I\",\n    \"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\n    \"O\",\"O\",\"O\",\"O\",\"O\",\n    \"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\"U\",\n    \"Y\",\"Y\",\"Y\",\"Y\",\"Y\",\n    \"D\"\n  ];\n\n  constructor() { }\n\n  viToEn(str: string) {\n    return str.replace(/[^\\u0000-\\u007E]/g, (a) => {\n      var index = this._vi_accents.indexOf(a);\n      return index < 0 ? a : this._en_accents[index];\n    });\n  }\n}","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class CacheStorageService {\n\n  // Time cache data. Default 5 minutes.\n  timeCache: number = 5 * 60 * 1000;\n\n  private __storage = {};\n  private __queue = {};\n\n  constructor() { }\n\n  promiseQueue(name: string, promise: Function, resovle: Function) {\n    if (this.__queue[name]) {\n      this.__queue[name].push(resovle);\n    } else {\n      this.__queue[name] = [resovle];\n      promise(name);\n    }\n  }\n\n  resolveQueue(name: string, context: any, args?: any[]) {\n    if (this.__queue[name]) {\n      this.__queue[name].forEach(fn => {\n        try {\n          fn.apply(context, args);\n        } catch (e) {\n\n        }\n      });\n      delete this.__queue[name];\n    }\n  }\n\n  getData(key: string) {\n    const data: CacheStorageItem = this.__storage[key];\n    // Check data expired\n    if (data && new Date().getTime() - data.time <= data.timeCache) {\n      return data.value;\n    }\n  }\n\n  setData(key: string, data: any, options?: CacheStorageOptions) {\n    const timeCache = options && options.timeCache || this.timeCache;\n    this.__storage[key] = <CacheStorageItem>{\n      time: new Date().getTime(),\n      timeCache: timeCache,\n      value: data\n    };\n  }\n\n  removeData(key: string) {\n    delete this.__storage[key];\n  }\n\n  clearData() {\n    this.__storage = {};\n  }\n\n}\n\nexport interface CacheStorageOptions {\n  timeCache?: number;\n  resolveData?: boolean;\n}\n\nexport interface CacheStorageItem {\n  time: number;\n  timeCache: number;\n  value: any;\n}\n","/**\n * Inspired from: https://stevepapa.com/ng-autosize/\n */\nimport { Input, AfterViewInit, ElementRef, HostListener, Directive} from '@angular/core';\n\n@Directive({\n  selector: 'textarea[appAutoSize]',\n  exportAs: 'appAutoSize'\n})\n\nexport class AutoSizeDirective implements AfterViewInit {\n\n  private el: HTMLElement;\n  private _minHeight: string;\n  private _maxHeight: string;\n  private _lastHeight: number;\n  private _clientWidth: number;\n\n  @Input('minHeight')\n  get minHeight() {\n    return this._minHeight;\n  }\n  set minHeight(val: string) {\n    this._minHeight = val;\n    this.updateMinHeight();\n  }\n\n  @Input('maxHeight')\n  get maxHeight() {\n    return this._maxHeight;\n  }\n  set maxHeight(val: string) {\n    this._maxHeight = val;\n    this.updateMaxHeight();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    //Only apply adjustment if element width had changed.\n    if (this.el.clientWidth === this._clientWidth) return;\n    this._clientWidth = this.element.nativeElement.clientWidth;\n    this.adjust();\n  }\n\n  @HostListener('input')\n  onInput(): void {\n    this.adjust();\n  }\n\n  constructor(public element: ElementRef){\n    this.el = element.nativeElement;\n    this._clientWidth = this.el.clientWidth;\n  }\n\n  ngAfterViewInit(): void{\n    // set element resize allowed manually by user\n    const style = window.getComputedStyle(this.el, null);\n    if (style.resize === 'both') {\n      this.el.style.resize = 'horizontal';\n    }\n    else if (style.resize === 'vertical') {\n      this.el.style.resize = 'none';\n    }\n    // run first adjust\n    this.adjust();\n  }\n\n  adjust(): void{\n    // perform height adjustments after input changes, if height is different\n    // if (this.el.style.height == this.element.nativeElement.scrollHeight + \"px\") return;\n    this.el.style.overflow = 'hidden';\n    this.el.style.height = 'auto';\n    this.el.style.height = this.el.scrollHeight + \"px\";\n  }\n\n  updateMinHeight(): void{\n    // Set textarea min height if input defined\n    this.el.style.minHeight = this._minHeight + 'px';\n  }\n\n  updateMaxHeight(): void{\n    // Set textarea max height if input defined\n    this.el.style.maxHeight = this._maxHeight + 'px';\n  }\n\n}","import {Directive, ElementRef, Input, OnChanges, OnInit} from '@angular/core';\nimport {UserProfileService} from \"./user-profile.service\";\n\ndeclare let iNet: any;\n\n@Directive({\n    selector: 'img[userAvatar]'\n})\nexport class AvatarDirective implements OnInit, OnChanges {\n    @Input() usercode: string = iNet.username;\n\n    constructor(private _el: ElementRef) {}\n\n    ngOnInit() {\n        this._el.nativeElement.addEventListener('error', this._loadAvatarError.bind(this));\n        this._setAvatar();\n    }\n\n    ngOnChanges() {\n        this._setAvatar();\n    }\n\n    private _setAvatar() {\n        if (!this.usercode) {\n            this._loadAvatarError();\n            return;\n        }\n        this._el.nativeElement.src = iNet.getUrl('system/userprofile/photo') + '?usercode=' + encodeURIComponent(this.usercode);\n    }\n\n    private _loadAvatarError() {\n        this._el.nativeElement.src = UserProfileService.DEFAULT_AVATAR_URL;\n    }\n}\n","import {Injectable} from '@angular/core';\n\ndeclare let iNet: any;\ndeclare let $: any;\n\n@Injectable()\nexport class ResourceLoaderService {\n\n    private _loaded = [];\n    private _version: string = '';\n\n    constructor() {\n        // this._initScriptVersion();\n    }\n\n    load(resources: Resource[], callback: Function) {\n        if (resources.length < 1) {\n            return callback();\n        }\n        this._loadResources(resources, callback);\n    }\n\n    loadJS(url: string, callback: Function) {\n        this._loadWithTagName('script', {\n            type: 'text/javascript',\n            src: this.getFullUrlJS(url)\n        }, callback);\n    }\n\n    loadCSS(url: string, callback: Function) {\n        this._loadWithTagName('link', {\n            type: 'text/css',\n            rel: 'stylesheet',\n            href: url\n        }, callback);\n    }\n\n    getFullUrlJS(url: string) {\n        if (url.indexOf('//') < 0 && iNet.fileServer) {\n            if (url.startsWith('/')) {\n                url = url.substr(1, url.length);\n            }\n            return iNet.fileServer + url;\n        }\n        return url;\n    }\n\n    isLoaded(url: string) {\n        return this._loaded.indexOf(url) > -1;\n    }\n\n    private _loadResources(resources: Resource[], callback: Function) {\n        let splitGroups = this._groupResources(resources);\n        let fn = () => {\n            if (splitGroups.length < 1) {\n                return callback();\n            }\n            this._loadGroups(splitGroups.splice(0, 1)[0], fn);\n        };\n        fn();\n    }\n\n    //  Split group resources by sync/async\n    private _groupResources(resources: Resource[]) {\n        let splitGroups = [];\n        let groups;\n\n        //  Split group resources by sync/async\n        for (let i = 0; i < resources.length; i++) {\n            if (!groups) {\n                groups = [];\n                splitGroups.push(groups);\n            }\n\n            groups.push(resources[i]);\n\n            if (resources[i].sync) {\n                groups = null;\n            }\n        }\n        return splitGroups;\n    }\n\n    private _loadGroups(resources: Resource[], callback: Function) {\n        let promises = [];\n        resources.forEach(item => promises.push(this._load(item)));\n        Promise.all(promises).then(() => {\n            callback();\n        });\n    }\n\n    private _load(resource: Resource): Promise<any> {\n        return new Promise((resolve) => {\n            if (resource.type === 'css') {\n                this.loadCSS(resource.url, resolve);\n            } else {\n                this.loadJS(resource.url, resolve);\n            }\n        });\n    }\n\n    private _loadWithTagName(tagName: string, properties, callback: Function) {\n        let url = properties.src || properties.href;\n        // Loaded\n        if (this.isLoaded(url)) {\n            return callback();\n        }\n\n\n        let tagEl = document.createElement(tagName);\n        for (let k in properties) {\n            tagEl[k] = properties[k];\n        }\n\n        tagEl.onload = () => {\n            this._loaded.push(url);\n            callback();\n        };\n        tagEl.onerror = (e) => {\n            console.warn(\"Load resource error: \" + url);\n            console.warn(e);\n            this._loaded.push(url);\n            callback();\n        };\n\n        document.head.appendChild(tagEl);\n    }\n\n    private _initScriptVersion() {\n        let $script = $('script');\n        for (let i = 0; i < $script.length; i++) {\n            let src = $script[i]['src'],\n                index = src.indexOf('?version=');\n            if (index > -1) {\n                this._version = src.substr(index + 1, src.length);\n                break;\n            }\n        }\n    }\n}\n\nexport interface Resource {\n    url: string;\n    sync?: boolean;\n    loaded?: boolean;\n    type?: string;\n}\n","import {SecurityService} from \"./security.service\";\n\nexport function initApp(config: SecurityService){\n    return () => {\n        return config.load();\n    }\n}","import {NgModule, APP_INITIALIZER} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {CoreService} from \"./core.service\";\nimport {HttpClientService} from \"./http-client.service\";\nimport {NotificationService} from \"./notification.service\";\nimport {AccentService} from \"./accent.service\";\nimport {UserProfileService} from \"./user-profile.service\";\nimport {CacheStorageService} from \"./cache-storage.service\";\nimport {RoleAccessDirective} from \"./role-access.directive\";\nimport {InfiniteScrollerDirective} from \"./infinite-scroller.directive\";\nimport {AutoSizeDirective} from \"./autosize.directive\";\nimport {AvatarDirective} from \"./avatar.directive\";\nimport {SecurityService} from \"./security.service\";\nimport {SSOUrlPipe} from \"./ssourl.pipe\";\nimport {ResourceLoaderService} from \"./resource-loader.service\";\nimport {initApp} from \"./init-app\";\nimport {LoadingIndicatorService} from \"./loading-indicator.service\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        HttpClientModule\n    ],\n    declarations: [\n        RoleAccessDirective,\n        InfiniteScrollerDirective,\n        AutoSizeDirective,\n        AvatarDirective,\n        SSOUrlPipe\n    ],\n    exports: [\n        RoleAccessDirective,\n        InfiniteScrollerDirective,\n        AutoSizeDirective,\n        AvatarDirective,\n        SSOUrlPipe\n    ],\n    providers: [\n        CoreService,\n        HttpClientService,\n        NotificationService,\n        AccentService,\n        UserProfileService,\n        CacheStorageService,\n        ResourceLoaderService,\n        {\n            'provide': APP_INITIALIZER,\n            'useFactory': initApp,\n            'multi': true,\n            'deps': [SecurityService]\n        },\n        SecurityService,\n        LoadingIndicatorService\n    ]\n})\nexport class CoreModule {\n}\n","import { Subject } from 'rxjs';\n\nexport abstract class WebSocketAbstract {\n    // receive message from socket server\n    onMessage: Subject<EnvelopBody> = new Subject();\n    onStateChange: Subject<number> = new Subject();\n    \n    // update readyState\n    stateChange () {\n        this.onStateChange.next(this.readyState);  \n    } \n\n    constructor(options: any, username: string) {\n        this.connect(options, username);\n    }\n\n    // WebSocket readyState\n    abstract readyState: number;\n\n    // connect to socket server\n    abstract connect(options: any, username: string): any;\n    \n    // close socket server\n    abstract close(): any;\n\n    // send message to socket server\n    abstract send(envelop: WebSocketEnvelop): Promise<boolean>;\n}\n\nexport enum WebSocketType {\n    \n    // send to the first address\n    SEND = 'send',\n\n    // publish to the all address\n    PUBLISH = 'publish',\n}\n\nexport class WebSocketEnvelop {\n    type: WebSocketType | string = WebSocketType.PUBLISH;\n    address: string;\n    body: EnvelopBody;\n}\n\nexport class EnvelopBody {\n    uuid: string;\n    application: string;\n    message: EnvelopMessage;\n    sender: string;\n    alias: string[]; // receivers\n    sent: number;\n}\n\nexport class EnvelopMessage {\n    sender: string;\n    alert: string;\n    content: string;\n    joins: string;\n    duration: string\n// , joins?: string, duration?: string\n    constructor(sender: string, content: string, joins?: string, duration?: string) {\n        this.content = this.alert = content;\n        this.sender = sender;\n        if(!!joins ){\n            this.joins = joins || sender;\n        }\n        this.duration = duration || \"0\";\n    }\n}\n","import {EnvelopBody, WebSocketAbstract, WebSocketEnvelop} from './websocket-abstract';\n\nexport class WebSocketJboss extends WebSocketAbstract {\n    private _socket: WebSocket;\n\n    get readyState(): number {\n        return this._socket ? this._socket.readyState : null;\n    }\n\n    stateChange() {\n        if (this.readyState === WebSocket.OPEN) {\n            this._ping();\n        }\n        super.stateChange();\n    }\n\n    connect(options: string, username: string) {\n        this._socket = new WebSocket(options);\n        this._socket.onmessage = (event) => {\n            // const envelop: WebSocketEnvelop = JSON.parse(event.data);\n            // if (envelop.body) {\n            //     this.onMessage.next(envelop.body);\n            // }\n            const envelopBody: EnvelopBody = JSON.parse(event.data);\n            if (envelopBody.sender) {\n                this.onMessage.next(envelopBody);\n            }\n        };\n        this._socket.onopen = () => this.stateChange();\n        this._socket.onerror = () => this.stateChange();\n        this._socket.onclose = () => this.stateChange();\n    }\n\n    close() {\n        this._socket.close();\n    }\n\n    send(envelop: WebSocketEnvelop): Promise<boolean> {\n        return new Promise(resolve => {\n            try {\n                this._socket.send(JSON.stringify(envelop));\n                resolve(true);\n            } catch(e) {\n                resolve(false);\n                console.warn('Send message failed', e);\n            }\n        });\n    }\n\n    private _ping() {\n        if (this.readyState === WebSocket.OPEN) {\n            this._socket.send(JSON.stringify({type: 'ping'}));\n            setTimeout(() => this._ping(), 10000);\n        }\n    }\n}\n","import { WebSocketAbstract, WebSocketEnvelop } from './websocket-abstract';\nimport * as EventBus from 'vertx3-eventbus-client';\n\nexport class WebSocketVertx extends WebSocketAbstract {\n    private _eventbus: EventBus;\n\n    get readyState(): number {\n        return this._eventbus ? this._eventbus.state : null;\n    };\n\n    connect(options: any, username: string) {\n        if (options && options.length === 2) {\n            var url = options[0];\n            var headers = {\n                keyapi: options[1]\n            };\n            this._connect(url, headers, username);\n        }\n    }\n\n    private _connect(url: string, headers: any, username: string) {\n        this._eventbus = new EventBus(url, {\n            transports: 'websocket'\n        });\n        this._eventbus.onopen = () => {\n            // Channel receive chat message\n            this._eventbus.registerHandler(username, headers, (err: any, msg: any) => {\n                if (msg) {\n                    this.onMessage.next(msg.body);\n                }\n            });\n            // Channel receive online message\n            // this._eventbus.registerHandler('news-feed', headers, (err: any, msg: any) => {\n            //     if (msg) {\n            //         this.onMessage.next(msg);\n            //     }\n            // });\n            this.stateChange();\n        };\n        this._eventbus.onclose = () => this.stateChange();\n        this._eventbus.onerror = () => this.stateChange();\n    }\n\n    close() {\n        this._eventbus.close();\n    }\n\n    send(envelop: WebSocketEnvelop): Promise<boolean> {\n        return new Promise(resolve => {\n            try {\n                this._eventbus.publish(envelop.address, envelop.body);\n                resolve(true);\n            } catch(e) {\n                resolve(false);\n                console.warn('Send message failed', e);\n            }\n        });\n    }\n}","import { WebSocketAbstract, WebSocketEnvelop, EnvelopBody, EnvelopMessage } from './websocket-abstract';\nimport { WebSocketJboss } from './websocket-jboss';\nimport { WebSocketVertx } from './websocket-vertx';\nimport { Subject } from 'rxjs';\n\ndeclare let iNet: any;\ndeclare let $: any;\n\nexport class WebSocketClient {\n    static instance: WebSocketClient = null;\n    socket: WebSocketAbstract;\n    // message from socket server\n    onMessage: Subject<EnvelopBody> = new Subject();\n    // socket state change\n    onStateChange: Subject<any> = new Subject();\n    // envelop send will be timeout after 30s\n    sendTimeout: number = 30000;\n    private _username: string;\n    private _autoconnect: boolean;\n    private _autoconnectAfter: number = 5000; // 5s\n    private _autoconnectRepeat: number = 4; // 5 times\n    private _autoconnectRetryAfter: number = 30000; // 30s\n    private _autoconectCount: number;\n    private _autoconectTimer: any;\n    private _envelopQueue = [];\n\n    get readyState(): number {\n        return this.socket ? this.socket.readyState : null;\n    }\n\n    get connecting(): boolean {\n        return this.readyState === WebSocket.CONNECTING || this.readyState === null;\n    }\n\n    get connected(): boolean {\n        return this.readyState === WebSocket.OPEN;\n    }\n\n    get closing(): boolean {\n        return this.readyState === WebSocket.CLOSING;\n    }\n\n    get closed(): boolean {\n        return this.readyState === WebSocket.CLOSED;\n    }\n\n    get autoconnect(): boolean {\n        return this._autoconnect;\n    }\n\n    constructor() {\n        if (!WebSocketClient.instance) {\n            this._getAccountInfo(() => this._register());\n        }\n        return WebSocketClient.instance = WebSocketClient.instance || this;\n\n\n    }\n\n    // close websocket client\n    close() {\n        this.socket.close();\n    }\n\n    send(address: string, message: string, application: string = ''): Promise<boolean> {\n        return this.sendEnvelop(this.buildEnvelop(address, message, application));\n    }\n\n    sendEnvelop(envelop: WebSocketEnvelop): Promise<boolean> {\n        if (this.connected) {\n            return this.socket.send(envelop);\n        } else {\n            return new Promise((resolve) => {\n                // Add to queue and waiting socket connected to send\n                let data: any = {\n                    e: envelop,\n                    f: resolve\n                };\n                data.timer = setTimeout(() => this._completeEnvelopQueue(data, false), this.sendTimeout);\n                this._envelopQueue.push(data);\n            });\n        }\n    }\n\n    buildEnvelop(address: string, message: string, application: string = '', join?: string): WebSocketEnvelop {\n        let envelop = new WebSocketEnvelop();\n        envelop.address = address;\n        envelop.body = new EnvelopBody();\n        envelop.body.application = application;\n        envelop.body.sender = this._username;\n        envelop.body.alias = [address];\n        envelop.body.message = new EnvelopMessage(this._username, message, join || '');\n        return envelop;\n    }\n\n    private _sendEnvelopQueue() {\n        this._envelopQueue.forEach((data) => {\n            this.sendEnvelop(data.e).then((status) => this._completeEnvelopQueue(data, status));\n        });\n    }\n\n    private _completeEnvelopQueue(data: any, status: boolean) {\n        const index = this._envelopQueue.indexOf(data);\n        if (index >= 0) {\n            this._envelopQueue.splice(index, 1);\n        }\n        data.f(status);\n    }\n\n    private _register(callback?: Function) {\n        $.ajax({\n            url: iNet.getPUrl('account/register'),\n            success: (data: string | string[]) => {\n                if (typeof data === 'string') {\n                    this.socket = new WebSocketJboss(data, this._username);\n                } else {\n                    this.socket = new WebSocketVertx(data, this._username);\n                }\n                this.socket.onStateChange.subscribe(() => this._stateChange());\n                this.socket.onMessage.subscribe((body: EnvelopBody) => {\n                    this.onMessage.next(body);\n                });\n                callback && callback();\n            },\n            error: () => {\n                callback && callback();\n                throw new Error(\"Account register error\");\n            }\n        });\n    }\n\n    private _getAccountInfo(callback: Function) {\n        if (this._username) {\n            return callback(this._username);\n        }\n        $.ajax({\n            url: iNet.getPUrl('system/userprofile/view'),\n            success: (data: any) => {\n                this._username = data && data.user && (data.user.usercode || data.user.username) || '';\n                callback(this._username);\n            },\n            error: () => callback(null)\n        });\n    }\n\n    private _stateChange() {\n        if (this.closed && !this.autoconnect) {\n            this._runAutoConnect();\n        }\n        if (this._autoconnect) {\n            return;\n        }\n        if (this.connected) {\n            this._sendEnvelopQueue();\n        }\n        this._cancelAutoConnect();\n        this.onStateChange.next();\n    }\n\n    private _runAutoConnect() {\n        this._autoconnect = true;\n        this._autoconectTimer = setTimeout(() => {\n            if (this.connected) {\n                this._cancelAutoConnect();\n                return;\n            }\n            if (this._autoconectCount >= this._autoconnectRepeat) {\n                this._cancelAutoConnect();\n                // Sleep and retry connect after 30s\n                setTimeout(() => this._runAutoConnect(), this._autoconnectRetryAfter);\n                return;\n            }\n\n\n            this._register(() => {\n                this._autoconectCount++;\n                if (!this.connected) {\n                    this._runAutoConnect();\n                }\n            });\n        }, this._autoconnectAfter);\n    }\n\n    private _cancelAutoConnect() {\n        this._autoconnect = false;\n        this._autoconectCount = 0;\n        clearTimeout(this._autoconectTimer);\n    }\n}","import { Injectable } from '@angular/core';\nimport { WebSocketClient } from './websocket-client';\n\n@Injectable()\nexport class WebSocketClientService extends WebSocketClient {\n    \n}","export class HtmlUtils {\n\n    static formatPattern: RegExp = new RegExp('(\\\\n)|(\\\\\\\\n)|(\\\\\\\\\\\\\\\\n)|', 'g');\n\n    // Escape html to display\n    static formatHtmlDisplay(html: string): string {\n        return html.replace(HtmlUtils.formatPattern, '<br>');\n    }\n}","export const ErrorMessage = {\n  CLIENT: 'Client-side error occurred',\n  SERVER:'Server-side error occurred',\n  TYPE: 'ERROR'\n};"]}